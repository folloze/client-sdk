import{a as Ye}from"./chunk.7KX576SE.js";import{c as j}from"./chunk.D33KHSEJ.js";import{a as L}from"./chunk.5MNNWURI.js";import{a as R}from"./chunk.3H6YR453.js";import{a as q,b as Ze,c as er,d as h,e as rr,f as tr,g as ir,h as w,i as nr,j as sr,k as or,l as T,m as C,n as ar,o as ur,p as O,q as cr,r as lr,s as fr,t as dr,u as I,w as pr}from"./chunk.OI2NJWH6.js";import{d as o,e as m}from"./chunk.KVVA2TM3.js";var x=o((ci,G)=>{var hr=w(),gr=q();function vr(t,e,r){(r!==void 0&&!gr(t[e],r)||r===void 0&&!(e in t))&&hr(t,e,r)}G.exports=vr});var B=o((g,d)=>{var br=Ze(),z=typeof g=="object"&&g&&!g.nodeType&&g,E=z&&typeof d=="object"&&d&&!d.nodeType&&d,yr=E&&E.exports===z,V=yr?br.Buffer:void 0,D=V?V.allocUnsafe:void 0;function mr(t,e){if(e)return t.slice();var r=t.length,i=D?D(r):new t.constructor(r);return t.copy(i),i}d.exports=mr});var H=o((li,U)=>{var K=sr();function qr(t){var e=new t.constructor(t.byteLength);return new K(e).set(new K(t)),e}U.exports=qr});var W=o((fi,N)=>{var wr=H();function Or(t,e){var r=e?wr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}N.exports=Or});var X=o((di,$)=>{function xr(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}$.exports=xr});var Y=o((pi,Q)=>{var Ar=h(),J=Object.create,Pr=function(){function t(){}return function(e){if(!Ar(e))return{};if(J)return J(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();Q.exports=Pr});var A=o((hi,Z)=>{var _r=or(),kr=_r(Object.getPrototypeOf,Object);Z.exports=kr});var re=o((gi,ee)=>{var Mr=Y(),Sr=A(),Fr=T();function jr(t){return typeof t.constructor=="function"&&!Fr(t)?Mr(Sr(t)):{}}ee.exports=jr});var ie=o((vi,te)=>{var Tr=O(),Cr=C();function Ir(t){return Cr(t)&&Tr(t)}te.exports=Ir});var oe=o((bi,se)=>{var Lr=er(),Rr=A(),Gr=C(),zr="[object Object]",Er=Function.prototype,Vr=Object.prototype,ne=Er.toString,Dr=Vr.hasOwnProperty,Br=ne.call(Object);function Kr(t){if(!Gr(t)||Lr(t)!=zr)return!1;var e=Rr(t);if(e===null)return!0;var r=Dr.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&ne.call(r)==Br}se.exports=Kr});var P=o((yi,ae)=>{function Ur(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}ae.exports=Ur});var ce=o((mi,ue)=>{var Hr=w(),Nr=q(),Wr=Object.prototype,$r=Wr.hasOwnProperty;function Xr(t,e,r){var i=t[e];(!($r.call(t,e)&&Nr(i,r))||r===void 0&&!(e in t))&&Hr(t,e,r)}ue.exports=Xr});var fe=o((qi,le)=>{var Jr=ce(),Qr=w();function Yr(t,e,r,i){var s=!r;r||(r={});for(var a=-1,u=e.length;++a<u;){var n=e[a],c=i?i(r[n],t[n],n,r,t):void 0;c===void 0&&(c=t[n]),s?Qr(r,n,c):Jr(r,n,c)}return r}le.exports=Yr});var pe=o((wi,de)=>{function Zr(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}de.exports=Zr});var ge=o((Oi,he)=>{var et=h(),rt=T(),tt=pe(),it=Object.prototype,nt=it.hasOwnProperty;function st(t){if(!et(t))return tt(t);var e=rt(t),r=[];for(var i in t)i=="constructor"&&(e||!nt.call(t,i))||r.push(i);return r}he.exports=st});var _=o((xi,ve)=>{var ot=dr(),at=ge(),ut=O();function ct(t){return ut(t)?ot(t,!0):at(t)}ve.exports=ct});var ye=o((Ai,be)=>{var lt=fe(),ft=_();function dt(t){return lt(t,ft(t))}be.exports=dt});var Ae=o((Pi,xe)=>{var me=x(),pt=B(),ht=W(),gt=X(),vt=re(),qe=ar(),we=ur(),bt=ie(),yt=cr(),mt=rr(),qt=h(),wt=oe(),Ot=lr(),Oe=P(),xt=ye();function At(t,e,r,i,s,a,u){var n=Oe(t,r),c=Oe(e,r),S=u.get(c);if(S){me(t,r,S);return}var l=a?a(n,c,r+"",t,e,u):void 0,p=l===void 0;if(p){var b=we(c),y=!b&&yt(c),F=!b&&!y&&Ot(c);l=c,b||y||F?we(n)?l=n:bt(n)?l=gt(n):y?(p=!1,l=pt(c,!0)):F?(p=!1,l=ht(c,!0)):l=[]:wt(c)||qe(c)?(l=n,qe(n)?l=xt(n):(!qt(n)||mt(n))&&(l=vt(c))):p=!1}p&&(u.set(c,l),s(l,c,i,a,u),u.delete(c)),me(t,r,l)}xe.exports=At});var ke=o((_i,_e)=>{var Pt=tr(),_t=x(),kt=nr(),Mt=Ae(),St=h(),Ft=_(),jt=P();function Pe(t,e,r,i,s){t!==e&&kt(e,function(a,u){if(s||(s=new Pt),St(a))Mt(t,e,u,r,Pe,i,s);else{var n=i?i(jt(t,u),a,u+"",t,e,s):void 0;n===void 0&&(n=a),_t(t,u,n)}},Ft)}_e.exports=Pe});var Se=o((ki,Me)=>{function Tt(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}Me.exports=Tt});var Te=o((Mi,je)=>{var Ct=Se(),Fe=Math.max;function It(t,e,r){return e=Fe(e===void 0?t.length-1:e,0),function(){for(var i=arguments,s=-1,a=Fe(i.length-e,0),u=Array(a);++s<a;)u[s]=i[e+s];s=-1;for(var n=Array(e+1);++s<e;)n[s]=i[s];return n[e]=r(u),Ct(t,this,n)}}je.exports=It});var Ie=o((Si,Ce)=>{function Lt(t){return function(){return t}}Ce.exports=Lt});var Ge=o((Fi,Re)=>{var Rt=Ie(),Le=ir(),Gt=I(),zt=Le?function(t,e){return Le(t,"toString",{configurable:!0,enumerable:!1,value:Rt(e),writable:!0})}:Gt;Re.exports=zt});var Ee=o((ji,ze)=>{var Et=800,Vt=16,Dt=Date.now;function Bt(t){var e=0,r=0;return function(){var i=Dt(),s=Vt-(i-r);if(r=i,s>0){if(++e>=Et)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}ze.exports=Bt});var De=o((Ti,Ve)=>{var Kt=Ge(),Ut=Ee(),Ht=Ut(Kt);Ve.exports=Ht});var Ke=o((Ci,Be)=>{var Nt=I(),Wt=Te(),$t=De();function Xt(t,e){return $t(Wt(t,e,Nt),t+"")}Be.exports=Xt});var He=o((Ii,Ue)=>{var Jt=q(),Qt=O(),Yt=fr(),Zt=h();function ei(t,e,r){if(!Zt(r))return!1;var i=typeof e;return(i=="number"?Qt(r)&&Yt(e,r.length):i=="string"&&e in r)?Jt(r[e],t):!1}Ue.exports=ei});var We=o((Li,Ne)=>{var ri=Ke(),ti=He();function ii(t){return ri(function(e,r){var i=-1,s=r.length,a=s>1?r[s-1]:void 0,u=s>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(s--,a):void 0,u&&ti(r[0],r[1],u)&&(a=s<3?void 0:a,s=1),e=Object(e);++i<s;){var n=r[i];n&&t(e,n,i,a)}return e})}Ne.exports=ii});var Xe=o((Ri,$e)=>{var ni=ke(),si=We(),oi=si(function(t,e,r,i){ni(t,e,r,i)});$e.exports=oi});var Je=m(Ye());var f=class{static async bindLiveBoard(e){await import("./mocks.3P3YKP5F.js").then(r=>r.rules(e)).catch(r=>console.error("could not import liveboard mocks",r))}static async bindDesigner(e){await import("./mocks.E5NXW7TU.js").then(r=>r.rules(e)).catch(r=>console.error("could not import designer mocks",r))}static async bindAnalytics(e){await import("./mocks.NJNEJI3W.js").then(r=>r.rules(e)).catch(r=>console.error("could not import analytics mocks",r))}};var Qe=m(Xe()),k=m(pr()),ai={organizationId:-1,useMock:!1,isPreview:!1,config:{baseURL:"/",headers:{}},analyticsServiceEndpoint:""},v=class{constructor(e){this.handleSuccess=e=>{var r,i;return((r=e.headers)==null?void 0:r.authorization)&&(this.jwt=e.headers.authorization.replace("bearer ","")),((i=e.headers)==null?void 0:i["folloze-session-guid"])&&(this.sessionGuid=e.headers["folloze-session-guid"]),e};var i,s;this.useMock=e.useMock,this.options=e,this.organizationId=e.organizationId,e.sessionGuid&&(this.sessionGuid=e.sessionGuid),e.jwt&&(this.jwt=e.jwt),e.flzClientFeature==="embedded"&&(this.isEmbeddedRequest=!0);let r=typeof window!="undefined"&&((i=window.FollozeState.initialState)==null?void 0:i.token)?(s=window.FollozeState.initialState)==null?void 0:s.token:void 0;r&&(this.urlToken=r)}static async create(e){e=(0,Qe.default)(ai,e,(i,s)=>s===null?i:void 0);let r=new v(e);return e.useMock?await r.createMockFetcher(e):r.createAxiosFetcher(e),r}async createMockFetcher(e){return await import("./src.H3ILTLVQ.js").then(async r=>{this.createAxiosFetcher(e),this.fetcher.interceptors.response.use(this.handleSuccess,this.MockHandleError),this.mock=new r.default(this.fetcher),await Promise.all([f.bindLiveBoard(this.mock),f.bindDesigner(this.mock),f.bindAnalytics(this.mock)])}).catch(r=>console.error("could not create mock fetcher",r))}withPartialContent(e,r=2e3,i=1){return new Promise((s,a)=>{if(i<=0){console.warn("stop retrying partial content"),a("stop retrying");return}new Promise(e).then(n=>{n.status==206?(console.debug(`retry partial content ${i}`),i=i-1,setTimeout(()=>{s(this.withPartialContent(e,r,i))},r)):(console.debug("partial content resolved",n.data),s(n.data))}).catch(n=>{console.error("could not finish partial content request",n),a(n)})})}withDisableOnPreview(e){var r;return((r=this.options)==null?void 0:r.isPreview)?new Promise(i=>i({status:200})):e()}handleError(e){var r;switch((0,k.default)(e,"response.status")){case 410:window.location.reload();break}return console.error(`could not complete axios request to: ${(r=e.config)==null?void 0:r.url}`,e.config),Promise.reject(e)}MockHandleError(e){var r;switch((0,k.default)(e,"response.status")){case 410:window.location.reload();break;case 409:return Promise.reject(e)}return(process==null?void 0:process.env)||console.warn(`could not complete mock request to: ${(r=e.config)==null?void 0:r.url}`,e.config),Promise.reject(e)}createAxiosFetcher(e){e.config.headers["X-Requested-With"]="XMLHttpRequest",e.csrfToken&&(e.config.headers["X-CSRF-Token"]=e.csrfToken),this.fetcher=Je.default.create(e.config),this.fetcher.interceptors.response.use(this.handleSuccess,this.handleError),this.fetcher.interceptors.request.use(r=>(this.sessionGuid&&(r.headers["folloze-session-guid"]=this.sessionGuid),this.jwt&&(r.headers.Authorization=`Bearer ${this.jwt}`),this.isEmbeddedRequest&&(r.headers["flz-client-feature"]="embedded"),r))}};var M=class{constructor(){}static async create(e){let r=new M,i=await v.create(e);return r.fetcher=i,r.analytics=new j(i),r.designer=new L(i),r.liveboard=new R(i),r}};export{v as a,M as b};
