import{b as m}from"./chunk.HBA5WTQJ.js";import{a as g}from"./chunk.TWUQ6LLZ.js";import{a as c,b as l}from"./chunk.R2MBWYP6.js";var P=class{constructor(t){this.fetchService=t,this.fetcher=t.fetcher}publishLiveBoard(t,a=!0){return new Promise((o,e)=>{this.fetcher.post(`/api/v1/boards/${t}/publish`,{with_go_online:a}).then(r=>{o(r.data)}).catch(r=>{console.error("could not publish live board",r),e(r)})})}getImageGallery(t){return new Promise((a,o)=>{this.fetcher.get("/api/v1/image_gallery",{params:c({},m(t))}).then(e=>{a(e.data)}).catch(e=>{console.error("could not get image gallery",e),o(e)})})}createPersonalGalleryMedia(t){let a=l(c({},t),{isPersonal:!0,organizationId:this.fetchService.organizationId});return new Promise((o,e)=>{this.fetcher.post("/api/v1/organization_images",m(a)).then(r=>{o(r.data)}).catch(r=>{console.error("could not create organization image",r),e(r)})})}deletePersonalGalleryMedia(t){return new Promise((a,o)=>{this.fetcher.delete(`/api/v1/organization_images/${t}`).then(()=>{a()}).catch(e=>{console.error("could not delete organization image",e),o(e)})})}getVideosGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"videos",type:"video"})}getImagesImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"images",type:"designer",category:"images"})}getBannersImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"banners",type:"designer",category:"banners"})}getAvatarsImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"avatars",type:"designer",category:"avatars"})}getPersonalVideosGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"videos",type:"video",isPersonal:!0})}getPersonalImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"images",type:"campaign",isPersonal:!0})}getMobileImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"mobile_banners",type:"designer",category:"mobile"})}getIconsImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"icons",type:"designer",category:"icons"})}getLogosImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"logos",type:"designer",category:"logos"})}getThumbnailsImageGallery(){return this.getImageGallery({organizationId:this.fetchService.organizationId,bankCategory:"thumbnails",type:"designer",category:"thumbnails"})}searchImageGallery(t,a){return this.getImageGallery({type:"search",query:t,count:a||10})}getImageUploadUrl(t){return new Promise((a,o)=>{this.fetcher.post("/api/v1/upload_urls",{type:t}).then(e=>{a(e.data)}).catch(e=>{console.error("could not get upload url",e),o(e)})})}getForms(t,a){return new Promise((o,e)=>{this.fetcher.get(`api/v1/boards/${t}/forms`,{params:{additional_form_id:a}}).then(r=>o(r.data)).catch(r=>{console.error("could not get forms",r),e(r)})})}createForm(t,a){return new Promise((o,e)=>{this.fetcher.post(`api/v1/boards/${t}/forms`,m(a)).then(r=>o(r.data)).catch(r=>{console.error("could not save form",r),e(r)})})}updateForm(t,a,o){return new Promise((e,r)=>{this.fetcher.put(`api/v1/boards/${t}/forms/${a}`,m(o)).then(s=>e(s.data)).catch(s=>{console.error("could not save form",s),r(s)})})}getCampaignElements(t,a){return new Promise((o,e)=>{this.fetcher.get(`prism/${t}/campaign_elements`,{params:{element_type:a}}).then(r=>o(r.data)).catch(r=>{console.error("could not get campaign elements",r),e(r)})})}getFooters(t){return this.getCampaignElements(t,g.footer)}getPrivacyMessages(t){return this.getCampaignElements(t,g.privacy_message)}getFormPrivacyMessages(t){return this.getCampaignElements(t,g.form_privacy_message)}getPrivacySettings(t){return new Promise((a,o)=>{this.fetcher.get(`/api/v1/organizations/${t}/settings/privacy`).then(e=>a(e.data)).catch(e=>{console.error("could not get privacy settings",e),o(e)})})}getEmailTemplates(t){return new Promise((a,o)=>{this.fetcher.get(`api/v1/boards/${t}/email_templates`).then(e=>a(e.data)).catch(e=>{console.error("could not get email templates",e),o(e)})})}getBoardHasPersonalization(t,a){return new Promise((o,e)=>{this.fetcher.get(`api/v1/organizations/${t}/settings/personalizations`,{params:{board_id:a}}).then(r=>o(r.data)).catch(r=>{console.error("could not get personalization setting",r),e(r)})})}getFeatureSettings(t){return new Promise((a,o)=>{this.fetcher.get(`/api/v1/organizations/${t}/settings/features`).then(e=>a(e.data)).catch(e=>{console.error("could not get feature settings",e),o(e)})})}getPersonalization(t){return new Promise((a,o)=>{this.fetcher.get(`/prism/${t}/personalization`).then(e=>a(e.data)).catch(e=>{console.error("could not get personalization",e),o(e)})})}savePersonalization(t,a){return new Promise((o,e)=>{this.fetcher.put(`/prism/${t}/personalization`,a).then(r=>o(r.data)).catch(r=>{console.error("could not save personalization",r),e(r)})})}saveLiveBoard(t,a){return new Promise((o,e)=>{this.fetcher.put(`/api/v1/boards/${t}/config`,{config:a}).then(r=>o({status:r.status,data:r.data})).catch(r=>{var s,i,n;if(((s=r.response)==null?void 0:s.status)===409||((i=r.response)==null?void 0:i.status)===406){let h=((n=r.response)==null?void 0:n.status)===409?"conflict":"unacceptable";console.warn(`could not save - ${h}`),o({status:r.response.status,data:r.response.data})}else console.error("could not save liveBoard config",r),e(r)})})}getLiveBoardConfig(t){return new Promise((a,o)=>{this.fetcher.get(`/api/v1/boards/${t}/config`).then(e=>{e.data.published_hash=e.data.unpublished_config.meta.newHash,a(e.data)}).catch(e=>{console.error("could not save get liveBoard config",e),o(e)})})}searchBoardContacts(t,a){return new Promise((o,e)=>{this.fetcher.get("/api/v1/search/board_contacts",{params:{board_id:t,query:a}}).then(r=>o(r.data)).catch(r=>{console.error("could not get board contacts",r),e(r)})})}getMergeTags(t,a,o){return new Promise((e,r)=>{this.fetcher.get(`/api/v1/organizations/${t}/merge_tags`,{params:{board_id:a,filters:o}}).then(s=>e(s.data)).catch(s=>{console.error("could not get merge tags",s),r(s)})})}getMergeTagValues(t,a){return new Promise((o,e)=>{this.fetcher.get(`/api/v1/merge_tags/${a}/merge_tags_lookups`,{params:{organization_id:t}}).then(r=>o(r.data)).catch(r=>{console.error("could not get merge tag values",r),e(r)})})}getDesignerThemes(t){return new Promise((a,o)=>{this.fetcher.get(`/api/v1/boards/${t}/designer_themes`).then(e=>a(e.data)).catch(e=>{console.error("could not get designer themes",e),o(e)})})}generateWidgetsTextFromScratch(t,a){let o=(e,r,s)=>{this.fetcher.post("/api/v1/boards/generation/widgets_texts",l(c({},t),{guid:s,captcha:a})).then(i=>e(i)).catch(i=>{console.error("could not generate widgets texts",i),r(i)})};return this.fetchService.withPartialContent(o,500,90)}generateWidgetsTextFromScratchWithBoardId(t,a,o){let e=(r,s,i)=>{this.fetcher.post(`/api/v1/boards/${t}/generation/from_scratch/widgets_texts`,l(c({},a),{guid:i,captcha:o})).then(n=>r(n)).catch(n=>{console.error("could not generate widgets texts",n),s(n)})};return this.fetchService.withPartialContent(e,500,90)}generateWidgetsTextFromPrompt(t,a,o){let e=(r,s,i)=>{this.fetcher.post(`/api/v1/boards/${t}/generation/from_prompt/widgets_texts`,l(c({},a),{guid:i,captcha:o})).then(n=>r(n)).catch(n=>{console.error("could not generate widgets texts",n),s(n)})};return this.fetchService.withPartialContent(e,500,90)}rephraseWidgetText(t,a){let o=(e,r,s)=>{this.fetcher.post("/api/v1/boards/rephrase/widgets_texts",l(c({},t),{guid:s,captcha:a})).then(i=>e(i)).catch(i=>{console.error("could not rephrase widgets texts",i),r(i)})};return this.fetchService.withPartialContent(o,500,90)}rephraseWidgetTextWithBoardId(t,a,o){let e=(r,s,i)=>{this.fetcher.post(`/api/v1/boards/${t}/rephrase/widgets_texts`,l(c({},a),{guid:i,captcha:o})).then(n=>r(n)).catch(n=>{console.error("could not rephrase widgets texts",n),s(n)})};return this.fetchService.withPartialContent(e,500,90)}translateWidgetText(t,a){let o=(e,r,s)=>{this.fetcher.post("/api/v1/boards/translate/widgets_texts",l(c({},t),{guid:s,captcha:a})).then(i=>e(i)).catch(i=>{console.error("could not translate widgets texts",i),r(i)})};return this.fetchService.withPartialContent(o,500,90)}getCustomSections(){return new Promise((t,a)=>{this.fetcher.get("/api/v1/custom_sections").then(o=>t(o.data)).catch(o=>{console.error("could not get saved sections",o),a(o)})})}getCustomFloatingWidgets(){return new Promise((t,a)=>{this.fetcher.get("/api/v1/custom_sections/floating_widgets").then(o=>t(o.data)).catch(o=>{console.error("could not get saved sections",o),a(o)})})}createCustomSection(t){return new Promise((a,o)=>{this.fetcher.post("/api/v1/custom_sections",t).then(e=>a(e.data)).catch(e=>{console.error("could not save section",e),o(e)})})}deleteCustomSection(t){return new Promise((a,o)=>{this.fetcher.delete(`/api/v1/custom_sections/${t}`).then(e=>a(e.data)).catch(e=>{console.error("could not delete section",e),o(e)})})}updateCustomSection(t,a){return new Promise((o,e)=>{this.fetcher.put(`/api/v1/custom_sections/${t}`,a).then(r=>o(r.data)).catch(r=>{console.error("could not update section",r),e(r)})})}async createOrUpdateChatConversation(t,a,o={}){return this.fetchService.fetcher.post("/api/v2/boards/chat/conversations",c({board_id:t,widget_id:a},o))}getVideoAIVoices(){return this.fetcher.get("/api/v1/video_ai/voices").then(t=>t.data)}getVideoAIAvatars(){return this.fetcher.get("/api/v1/video_ai/avatars").then(t=>t.data)}generateVideoAI(t){return this.fetcher.post("/api/v1/video_ai/generate",t).then(a=>a.data)}getVideoAIStatus(t){return this.fetcher.get(`/api/v1/video_ai/status/${t}`).then(a=>a.data)}async generateTextFromFile(t,a,o){let e=`/api/v1/boards/${t}/generation/from_file/texts`,r=await this.fetcher.post(e,{filename:a.file.name,operation:a.operation,captcha:o}),s=r.data.file_upload_details,i=new FormData;i.append("attributes",JSON.stringify(s.data)),i.append("file",a.file),await fetch(s.url,{method:s.method,headers:s.headers,body:i});let n=(h,p,u=r.data.guid)=>{this.fetcher.post(e,{guid:u,captcha:o}).then(d=>h(d)).catch(d=>p(d))};return await this.fetchService.withPartialContent(n,500,90)}generateTextFromUrl(t,a,o){let e=(r,s,i)=>{this.fetcher.post(`/api/v1/boards/${t}/generation/from_url/texts`,l(c({},a),{guid:i,captcha:o})).then(n=>r(n)).catch(n=>{console.error("could not generate text from url",n),s(n)})};return this.fetchService.withPartialContent(e,500,90)}};export{P as a};
