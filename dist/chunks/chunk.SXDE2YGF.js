import{d as j}from"./chunk.KDAOD2P3.js";import{l as Ve}from"./chunk.HBA5WTQJ.js";import{C as Er,G as ke}from"./chunk.ZTUE7IM2.js";import{a as ze}from"./chunk.XCSIOQG2.js";import{a as tt,b as et,f as Ut,g as _t}from"./chunk.R2MBWYP6.js";var wt,Ar=new Uint8Array(16);function Nt(){if(!wt&&(wt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!wt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wt(Ar)}var Me=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Cr(i){return typeof i=="string"&&Me.test(i)}var De=Cr;var E=[];for(xt=0;xt<256;++xt)E.push((xt+256).toString(16).substr(1));var xt;function Tr(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(E[i[t+0]]+E[i[t+1]]+E[i[t+2]]+E[i[t+3]]+"-"+E[i[t+4]]+E[i[t+5]]+"-"+E[i[t+6]]+E[i[t+7]]+"-"+E[i[t+8]]+E[i[t+9]]+"-"+E[i[t+10]]+E[i[t+11]]+E[i[t+12]]+E[i[t+13]]+E[i[t+14]]+E[i[t+15]]).toLowerCase();if(!De(e))throw TypeError("Stringified UUID is invalid");return e}var Ue=Tr;function Sr(i,t,e){i=i||{};var r=i.random||(i.rng||Nt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return Ue(r)}var Wt=Sr;var bt=globalThis,Et=bt.ShadowRoot&&(bt.ShadyCSS===void 0||bt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qt=Symbol(),Ne=new WeakMap,At=class{constructor(t,e,r){if(this._$cssResult$=!0,r!==qt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(Et&&t===void 0){let r=e!==void 0&&e.length===1;r&&(t=Ne.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Ne.set(e,t))}return t}toString(){return this.cssText}},We=i=>new At(typeof i=="string"?i:i+"",void 0,qt),it=(i,...t)=>{let e=i.length===1?i[0]:t.reduce((r,o,n)=>r+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+i[n+1],i[0]);return new At(e,i,qt)},Gt=(i,t)=>{if(Et)i.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let e of t){let r=document.createElement("style"),o=bt.litNonce;o!==void 0&&r.setAttribute("nonce",o),r.textContent=e.cssText,i.appendChild(r)}},Ct=Et?i=>i:i=>i instanceof CSSStyleSheet?(t=>{let e="";for(let r of t.cssRules)e+=r.cssText;return We(e)})(i):i;var{is:Lr,defineProperty:Pr,getOwnPropertyDescriptor:$r,getOwnPropertyNames:jr,getOwnPropertySymbols:Fr,getPrototypeOf:Or}=Object,I=globalThis,qe=I.trustedTypes,Ir=qe?qe.emptyScript:"",Qt=I.reactiveElementPolyfillSupport,rt=(i,t)=>i,ot={toAttribute(i,t){switch(t){case Boolean:i=i?Ir:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){let e=i;switch(t){case Boolean:e=i!==null;break;case Number:e=i===null?null:Number(i);break;case Object:case Array:try{e=JSON.parse(i)}catch(r){e=null}}return e}},Tt=(i,t)=>!Lr(i,t),Ge={attribute:!0,type:String,converter:ot,reflect:!1,hasChanged:Tt},Qe,He;(Qe=Symbol.metadata)!=null||(Symbol.metadata=Symbol("metadata")),(He=I.litPropertyMetadata)!=null||(I.litPropertyMetadata=new WeakMap);var R=class extends HTMLElement{static addInitializer(t){var e;this._$Ei(),((e=this.l)!=null?e:this.l=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=Ge){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){let r=Symbol(),o=this.getPropertyDescriptor(t,r,e);o!==void 0&&Pr(this.prototype,t,o)}}static getPropertyDescriptor(t,e,r){var s;let{get:o,set:n}=(s=$r(this.prototype,t))!=null?s:{get(){return this[e]},set(a){this[e]=a}};return{get(){return o==null?void 0:o.call(this)},set(a){let l=o==null?void 0:o.call(this);n.call(this,a),this.requestUpdate(t,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){var e;return(e=this.elementProperties.get(t))!=null?e:Ge}static _$Ei(){if(this.hasOwnProperty(rt("elementProperties")))return;let t=Or(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(rt("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(rt("properties"))){let e=this.properties,r=[...jr(e),...Fr(e)];for(let o of r)this.createProperty(o,e[o])}let t=this[Symbol.metadata];if(t!==null){let e=litPropertyMetadata.get(t);if(e!==void 0)for(let[r,o]of e)this.elementProperties.set(r,o)}this._$Eh=new Map;for(let[e,r]of this.elementProperties){let o=this._$Eu(e,r);o!==void 0&&this._$Eh.set(o,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let r=new Set(t.flat(1/0).reverse());for(let o of r)e.unshift(Ct(o))}else t!==void 0&&e.push(Ct(t));return e}static _$Eu(t,e){let r=e.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e,r;((e=this._$EO)!=null?e:this._$EO=new Set).add(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)==null||r.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){let t=new Map,e=this.constructor.elementProperties;for(let r of e.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){var e;let t=(e=this.shadowRoot)!=null?e:this.attachShadow(this.constructor.shadowRootOptions);return Gt(t,this.constructor.elementStyles),t}connectedCallback(){var t,e;(t=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var o;return(o=r.hostConnected)==null?void 0:o.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var r;return(r=e.hostDisconnected)==null?void 0:r.call(e)})}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EC(t,e){var n;let r=this.constructor.elementProperties.get(t),o=this.constructor._$Eu(t,r);if(o!==void 0&&r.reflect===!0){let s=(((n=r.converter)==null?void 0:n.toAttribute)!==void 0?r.converter:ot).toAttribute(e,r.type);this._$Em=t,s==null?this.removeAttribute(o):this.setAttribute(o,s),this._$Em=null}}_$AK(t,e){var n;let r=this.constructor,o=r._$Eh.get(t);if(o!==void 0&&this._$Em!==o){let s=r.getPropertyOptions(o),a=typeof s.converter=="function"?{fromAttribute:s.converter}:((n=s.converter)==null?void 0:n.fromAttribute)!==void 0?s.converter:ot;this._$Em=o,this[o]=a.fromAttribute(e,s.type),this._$Em=null}}requestUpdate(t,e,r){var o;if(t!==void 0){if(r!=null||(r=this.constructor.getPropertyOptions(t)),!((o=r.hasChanged)!=null?o:Tt)(this[t],e))return;this.P(t,e,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,e,r){var o;this._$AL.has(t)||this._$AL.set(t,e),r.reflect===!0&&this._$Em!==t&&((o=this._$Ej)!=null?o:this._$Ej=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r,o;if(!this.isUpdatePending)return;if(!this.hasUpdated){if((r=this.renderRoot)!=null||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[s,a]of this._$Ep)this[s]=a;this._$Ep=void 0}let n=this.constructor.elementProperties;if(n.size>0)for(let[s,a]of n)a.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],a)}let t=!1,e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(o=this._$EO)==null||o.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(e)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(r=>{var o;return(o=r.hostUpdated)==null?void 0:o.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(e=>this._$EC(e,this[e]))),this._$EU()}updated(t){}firstUpdated(t){}},Be;R.elementStyles=[],R.shadowRootOptions={mode:"open"},R[rt("elementProperties")]=new Map,R[rt("finalized")]=new Map,Qt==null||Qt({ReactiveElement:R}),((Be=I.reactiveElementVersions)!=null?Be:I.reactiveElementVersions=[]).push("2.0.4");var nt=globalThis,St=nt.trustedTypes,Ye=St?St.createPolicy("lit-html",{createHTML:i=>i}):void 0,Je="$lit$",k=`lit$${Math.random().toFixed(9).slice(2)}$`,Ke="?"+k,Rr=`<${Ke}>`,M=document,st=()=>M.createComment(""),at=i=>i===null||typeof i!="object"&&typeof i!="function",Ze=Array.isArray,kr=i=>Ze(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Ht=`[ 	
\f\r]`,lt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Xe=/-->/g,ti=/>/g,D=RegExp(`>|${Ht}(?:([^\\s"'>=/]+)(${Ht}*=${Ht}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ei=/'/g,ii=/"/g,ri=/^(?:script|style|textarea|title)$/i,oi=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),U=oi(1),tn=oi(2),N=Symbol.for("lit-noChange"),x=Symbol.for("lit-nothing"),ni=new WeakMap,W=M.createTreeWalker(M,129);function si(i,t){if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ye!==void 0?Ye.createHTML(t):t}var Vr=(i,t)=>{let e=i.length-1,r=[],o,n=t===2?"<svg>":"",s=lt;for(let a=0;a<e;a++){let l=i[a],d,u,h=-1,m=0;for(;m<l.length&&(s.lastIndex=m,u=s.exec(l),u!==null);)m=s.lastIndex,s===lt?u[1]==="!--"?s=Xe:u[1]!==void 0?s=ti:u[2]!==void 0?(ri.test(u[2])&&(o=RegExp("</"+u[2],"g")),s=D):u[3]!==void 0&&(s=D):s===D?u[0]===">"?(s=o!=null?o:lt,h=-1):u[1]===void 0?h=-2:(h=s.lastIndex-u[2].length,d=u[1],s=u[3]===void 0?D:u[3]==='"'?ii:ei):s===ii||s===ei?s=D:s===Xe||s===ti?s=lt:(s=D,o=void 0);let _=s===D&&i[a+1].startsWith("/>")?" ":"";n+=s===lt?l+Rr:h>=0?(r.push(d),l.slice(0,h)+Je+l.slice(h)+k+_):l+k+(h===-2?a:_)}return[si(i,n+(i[e]||"<?>")+(t===2?"</svg>":"")),r]},Y=class{constructor({strings:t,_$litType$:e},r){let o;this.parts=[];let n=0,s=0,a=t.length-1,l=this.parts,[d,u]=Vr(t,e);if(this.el=Y.createElement(d,r),W.currentNode=this.el.content,e===2){let h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(o=W.nextNode())!==null&&l.length<a;){if(o.nodeType===1){if(o.hasAttributes())for(let h of o.getAttributeNames())if(h.endsWith(Je)){let m=u[s++],_=o.getAttribute(h).split(k),w=/([.?@])?(.*)/.exec(m);l.push({type:1,index:n,name:w[2],strings:_,ctor:w[1]==="."?li:w[1]==="?"?ci:w[1]==="@"?ui:ct}),o.removeAttribute(h)}else h.startsWith(k)&&(l.push({type:6,index:n}),o.removeAttribute(h));if(ri.test(o.tagName)){let h=o.textContent.split(k),m=h.length-1;if(m>0){o.textContent=St?St.emptyScript:"";for(let _=0;_<m;_++)o.append(h[_],st()),W.nextNode(),l.push({type:2,index:++n});o.append(h[m],st())}}}else if(o.nodeType===8)if(o.data===Ke)l.push({type:2,index:n});else{let h=-1;for(;(h=o.data.indexOf(k,h+1))!==-1;)l.push({type:7,index:n}),h+=k.length-1}n++}}static createElement(t,e){let r=M.createElement("template");return r.innerHTML=t,r}};function J(i,t,e=i,r){var s,a,l;if(t===N)return t;let o=r!==void 0?(s=e._$Co)==null?void 0:s[r]:e._$Cl,n=at(t)?void 0:t._$litDirective$;return(o==null?void 0:o.constructor)!==n&&((a=o==null?void 0:o._$AO)==null||a.call(o,!1),n===void 0?o=void 0:(o=new n(i),o._$AT(i,e,r)),r!==void 0?((l=e._$Co)!=null?l:e._$Co=[])[r]=o:e._$Cl=o),o!==void 0&&(t=J(i,o._$AS(i,t.values),o,r)),t}var ai=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var d;let{el:{content:e},parts:r}=this._$AD,o=((d=t==null?void 0:t.creationScope)!=null?d:M).importNode(e,!0);W.currentNode=o;let n=W.nextNode(),s=0,a=0,l=r[0];for(;l!==void 0;){if(s===l.index){let u;l.type===2?u=new K(n,n.nextSibling,this,t):l.type===1?u=new l.ctor(n,l.name,l.strings,this,t):l.type===6&&(u=new di(n,this,t)),this._$AV.push(u),l=r[++a]}s!==(l==null?void 0:l.index)&&(n=W.nextNode(),s++)}return W.currentNode=M,o}p(t){let e=0;for(let r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}},K=class{get _$AU(){var t,e;return(e=(t=this._$AM)==null?void 0:t._$AU)!=null?e:this._$Cv}constructor(t,e,r,o){var n;this.type=2,this._$AH=x,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=o,this._$Cv=(n=o==null?void 0:o.isConnected)!=null?n:!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=J(this,t,e),at(t)?t===x||t==null||t===""?(this._$AH!==x&&this._$AR(),this._$AH=x):t!==this._$AH&&t!==N&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):kr(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==x&&at(this._$AH)?this._$AA.nextSibling.data=t:this.T(M.createTextNode(t)),this._$AH=t}$(t){var n;let{values:e,_$litType$:r}=t,o=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Y.createElement(si(r.h,r.h[0]),this.options)),r);if(((n=this._$AH)==null?void 0:n._$AD)===o)this._$AH.p(e);else{let s=new ai(o,this),a=s.u(this.options);s.p(e),this.T(a),this._$AH=s}}_$AC(t){let e=ni.get(t.strings);return e===void 0&&ni.set(t.strings,e=new Y(t)),e}k(t){Ze(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,r,o=0;for(let n of t)o===e.length?e.push(r=new K(this.S(st()),this.S(st()),this,this.options)):r=e[o],r._$AI(n),o++;o<e.length&&(this._$AR(r&&r._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,e);t&&t!==this._$AB;){let o=t.nextSibling;t.remove(),t=o}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}},ct=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,r,o,n){this.type=1,this._$AH=x,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=x}_$AI(t,e=this,r,o){let n=this.strings,s=!1;if(n===void 0)t=J(this,t,e,0),s=!at(t)||t!==this._$AH&&t!==N,s&&(this._$AH=t);else{let a=t,l,d;for(t=n[0],l=0;l<n.length-1;l++)d=J(this,a[r+l],e,l),d===N&&(d=this._$AH[l]),s||(s=!at(d)||d!==this._$AH[l]),d===x?t=x:t!==x&&(t+=(d!=null?d:"")+n[l+1]),this._$AH[l]=d}s&&!o&&this.j(t)}j(t){t===x?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}},li=class extends ct{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===x?void 0:t}},ci=class extends ct{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==x)}},ui=class extends ct{constructor(t,e,r,o,n){super(t,e,r,o,n),this.type=5}_$AI(t,e=this){var s;if((t=(s=J(this,t,e,0))!=null?s:x)===N)return;let r=this._$AH,o=t===x&&r!==x||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,n=t!==x&&(r===x||o);o&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;typeof this._$AH=="function"?this._$AH.call((r=(e=this.options)==null?void 0:e.host)!=null?r:this.element,t):this._$AH.handleEvent(t)}},di=class{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){J(this,t)}};var Bt=nt.litHtmlPolyfillSupport,pi;Bt==null||Bt(Y,K),((pi=nt.litHtmlVersions)!=null?pi:nt.litHtmlVersions=[]).push("3.1.4");var fi=(i,t,e)=>{var n,s;let r=(n=e==null?void 0:e.renderBefore)!=null?n:t,o=r._$litPart$;if(o===void 0){let a=(s=e==null?void 0:e.renderBefore)!=null?s:null;r._$litPart$=o=new K(t.insertBefore(st(),a),a,void 0,e!=null?e:{})}return o._$AI(i),o};var T=class extends R{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;let t=super.createRenderRoot();return(r=(e=this.renderOptions).renderBefore)!=null||(e.renderBefore=t.firstChild),t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=fi(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return N}},mi;T._$litElement$=!0,T["finalized"]=!0,(mi=globalThis.litElementHydrateSupport)==null||mi.call(globalThis,{LitElement:T});var Yt=globalThis.litElementPolyfillSupport;Yt==null||Yt({LitElement:T});var hi;((hi=globalThis.litElementVersions)!=null?hi:globalThis.litElementVersions=[]).push("4.0.6");var zr="flz-designer-event-type",Jt=class extends Event{constructor(t,e,r,o,n,s){super(e,{bubbles:!0,composed:!0});this.skipWidgetsNotify=!1;this.action=r,this.payload=o,this.emitter=t,this.onSuccess=n,this.onError=s}},Kt=class extends Jt{constructor(t,e,r,o,n){super(t,ze,e,r,o,n)}},Zt=class extends Jt{constructor(t,e,r,o,n){super(t,zr,e,r,o,n)}};function P(i,t,e,r,o){window.board.dispatchEvent(new Kt(i,t,e,r,o))}function Xt(i,t,e,r,o){window.board.dispatchEvent(new Zt(i,t,e,r,o))}function Lt(i,t,e,r,o){P(i,t,e,r,o)}function yn(i,t,e){return new Promise((r,o)=>{P(i,t,e,r,o)})}function vn(i,t,e){return new Promise((r,o)=>{Xt(i,t,e,r,o)})}function _n(i,t,e){let r=new CustomEvent(t,Object.assign({bubbles:!0,cancelable:!1,composed:!0,detail:{}},e));return i.dispatchEvent(r),r}function wn(i,t){return new Promise(e=>{function r(o){o.target===i&&(i.removeEventListener(t,r),e())}i.addEventListener(t,r)})}function xn(i,t){i.onSuccess?t?i.onSuccess(t):i.onSuccess():console.warn("onSuccess is not defined for event",i.action)}function bn(i,t){i.onError?i.onError(t):console.error(`onError is not defined for event ${i.action}`,t)}var te=class extends T{constructor(){super();this.setConfigOnlyOnce=!1;this.handleGetWidget=t=>{t.stopPropagation(),t.detail.result.widget=this};this._widgetId=Wt()}connectedCallback(){super.connectedCallback(),this.addEventListener("get-widget",this.handleGetWidget),P(this,"widget-connected")}willUpdate(t){super.willUpdate(t),P(this,"widget-update")}disconnectedCallback(){this.removeEventListener("get-widget",this.handleGetWidget),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated(t),P(this,"widget-first-updated")}updated(t){super.updated(t),P(this,"widget-updated")}set config(t){this._widgetId=t.id,this._config=t,this._data=t==null?void 0:t.data,this.requestUpdate()}get config(){return this._config}set data(t){this._data=t,this.requestUpdate()}get data(){return this._data}get widgetId(){return this._widgetId}onEnterViewport(t){this.style.setProperty("--fz-animation-1-name","inherit"),this.style.setProperty("--fz-animation-1-play-state","running")}onLeaveViewport(t){}incomingEvents(t){}stateChanged(t){}};var gi=i=>{class t extends i{constructor(){super(...arguments);this._isConfigSet=!1}set config(r){super.config=r,this._isConfigSet=!0}get config(){return super.config}isConfigSet(){return this._isConfigSet}shouldUpdate(r){return this._isConfigSet?super.shouldUpdate(r):!1}}return t};var q=class extends gi(te){};var ee=class extends q{onClose(){}onShow(){}};var Mr=class extends q{};var ie=class{constructor(t){this.childFloaters=[];this._addFloatChild=t=>{if(!t.detail.child)throw new Error("child is required to add to float children container");t.stopPropagation(),this.add(t.detail.child)};this.host=t,t.addController(this)}hostConnected(){this.host.addEventListener("add-float-child",this._addFloatChild)}hostDisconnected(){this.host.removeEventListener("add-float-child",this._addFloatChild),this.closeAllChildFloaters()}add(t){this.childFloaters.push(t)}remove(t){let e=this.childFloaters.indexOf(t);e>-1&&this.childFloaters.splice(e,1)}removeAndClose(t){t.close(),this.remove(t)}all(){return this.childFloaters}closeAllChildFloaters(){this.childFloaters.forEach(t=>t.close()),this.childFloaters=[]}};var re=class extends T{constructor(){super();this.floatChildrenContainer=new ie(this);this.addEventListener("get-editor-container",t=>{t.detail.editorContainer.container=this.parentElement})}set widget(t){this._widget=t,this.data=t.data}get widget(){return this._widget}set propertyPath(t){this._propPath=t}get propertyPath(){return this._propPath}get widgetId(){return this._widget.id}updateWidget(){this._widget.data=this._data}set data(t){this._data=t}get data(){return this._data}};var yi=Ut(ke()),Dr=class extends re{set propertyPath(t){this._propPath=t}get propertyPath(){return this._propPath}set editableComponent(t){this._editableComponent=t}get editableComponent(){return this._editableComponent}firstUpdated(){this.data=(0,yi.default)(this.widget.data,this.propertyPath)}};var Ur=class extends T{set editTag(t){this._editTag=t}get editTag(){return this._editTag}set viewTag(t){this._viewTag=t}get viewTag(){return this._viewTag}set viewTagDataProperty(t){this._viewTagDataProperty=t}get viewTagDataProperty(){return this._viewTagDataProperty}set board(t){this._board=t}get board(){return this._board}set onCancel(t){this._onCancel=t}get onCancel(){return this._onCancel}};var Nr=class extends T{constructor(){super();this.zIndex=10;this.xOffset=0;this.yOffset=0;this.currentX=0;this.currentY=0;this.initialX=0;this.initialY=0;this.isDraggable=!0}resetPosition(){this.zIndex=10,this.xOffset=0,this.yOffset=0,this.currentX=0,this.currentY=0,this.initialX=0,this.initialY=0,this.setAttribute("style","")}set pos(t){t?this._pos=t:this._pos={x:0,y:0},this.currentX=this.xOffset=this.initialX=this._pos.x,this.currentY=this.yOffset=this.initialY=this._pos.y,this.moveTo(this._pos)}get pos(){return this._pos}moveTo(t){this.setAttribute("style",`transform: translate(${t.x}px, ${t.y}px); z-index: ${this.zIndex}`)}onDragStart(t){console.log(t)}onDragEnd(t){this._pos={x:Math.round(this.currentX),y:Math.round(this.currentY)},console.log("new pos",this._pos)}onDrag(t){this.setAttribute("style",`transform: translate(${this.currentX}px, ${this.currentY}px);`)}onClick(t){console.log("inner ckick",t)}refreshPos(){this.onDragEnd()}};function vi(i,t,e,r,o){let n=0,s=0,a=0,l=0;e?i.querySelector(e).onmousedown=u:t.onmousedown=u;let d=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--edit-fz-system-control-bar-height"))||0;function u(c){c=c||window.event,c.preventDefault(),a=c.clientX,l=c.clientY,document.onmouseup=w,document.onmousemove=_}function h(c,f){let v=t.offsetTop-f,p=t.offsetLeft-c;return v<=d&&(v=d+1),(p<=0||p>=window.innerWidth-t.offsetWidth)&&(p<5?p=1:p=window.innerWidth-t.offsetWidth-1),[p,v]}function m(c,f){let v=t.getBoundingClientRect(),p=r.getBoundingClientRect(),L=t.offsetTop-f,C=t.offsetLeft-c;return L<=0?L=1:L>=p.height-v.height&&(L=r.offsetHeight-t.offsetHeight-1),(C<=0||C>=p.width-v.width)&&(C<5?C=1:C=r.offsetWidth-t.offsetWidth-1),[C,L]}function _(c){c=c||window.event,c.preventDefault(),n=a-c.clientX,s=l-c.clientY,a=c.clientX,l=c.clientY;let f,v;r?[f,v]=m(n,s):[f,v]=h(n,s),t.style.top=v+"px",t.style.left=f+"px",o&&(o==null?void 0:o.all().length)>0&&o.all().map(p=>{p.style.top=c.movementY+parseInt(p.style.top)+"px",p.style.left=c.movementX+parseInt(p.style.left)+"px"})}function w(){document.onmouseup=null,document.onmousemove=null}}var Wr={attribute:!0,type:String,converter:ot,reflect:!1,hasChanged:Tt},qr=(i=Wr,t,e)=>{let{kind:r,metadata:o}=e,n=globalThis.litPropertyMetadata.get(o);if(n===void 0&&globalThis.litPropertyMetadata.set(o,n=new Map),n.set(e.name,i),r==="accessor"){let{name:s}=e;return{set(a){let l=t.get.call(this);t.set.call(this,a),this.requestUpdate(s,l,i)},init(a){return a!==void 0&&this.P(s,void 0,i),a}}}if(r==="setter"){let{name:s}=e;return function(a){let l=this[s];t.call(this,a),this.requestUpdate(s,l,i)}}throw Error("Unsupported decorator location: "+r)};function Pt(i){return(t,e)=>typeof e=="object"?qr(i,t,e):((r,o,n)=>{let s=o.hasOwnProperty(n);return o.constructor.createProperty(n,s?et(tt({},r),{wrapped:!0}):r),s?Object.getOwnPropertyDescriptor(o,n):void 0})(i,t,e)}var G=(i,t,e)=>(e.configurable=!0,e.enumerable=!0,Reflect.decorate&&typeof t!="object"&&Object.defineProperty(i,t,e),e);function _i(i,t){return(e,r,o)=>{let n=s=>{var a,l;return(l=(a=s.renderRoot)==null?void 0:a.querySelector(i))!=null?l:null};if(t){let{get:s,set:a}=typeof r=="object"?e:o!=null?o:(()=>{let l=Symbol();return{get(){return this[l]},set(d){this[l]=d}}})();return G(e,r,{get(){let l=s.call(this);return l===void 0&&(l=n(this),(l!==null||this.hasUpdated)&&a.call(this,l)),l}})}return G(e,r,{get(){return n(this)}})}}var wi=i=>{class t extends i{connectedCallback(){super.connectedCallback(),this.addEventListener("close",this.close.bind(this))}disconnectedCallback(){this.removeEventListener("close",this.close.bind(this)),super.disconnectedCallback()}firstUpdated(r){super.firstUpdated(r),setTimeout(()=>{this.moveToPos(),this.style.opacity="1"})}setLayer(r){this.layer=r,this.style.zIndex=(104+r).toString()}getLayer(){return this.layer}close(r){r==null||r.stopPropagation(),this.remove()}setStartPos(r,o){this.x=r,this.y=o}checkIfYOverflow(r,o){let n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)+window.scrollY;return r+o>n-5}getY(){return this.y+30+window.scrollY}getYWithOverflow(r){return this.y-r-30+window.scrollY}moveToPos(){if(!this.x||!this.y)return;let r=this.getBoundingClientRect(),o=r.width,n=r.height,a=document.body.getBoundingClientRect().width,l=this.x-o/2;l<5?l=5:l+o>a-5&&(l=a-o-5);let d=this.getY();this.checkIfYOverflow(d,n)&&(d=this.getYWithOverflow(n));let u=window.scrollY+60;if(d<=u){d+=u-d+3;let h=l,m=l+r.width,_=d-window.scrollY,w=_+r.height;if(h<this.x&&this.x<m&&_<this.y&&this.y<w){let c=a/2;this.x<c?l+=m-this.x+30:l-=m-this.x+30}}this.style.top=`${d}px`,this.style.left=`${l}px`}}return t.styles=[it`
                :host {
                    --floatBoxShadow: 0.1px 1.1px 1.9px -13px rgba(0, 0, 0, 0.045),
                        0.3px 2.5px 4.7px -13px rgba(0, 0, 0, 0.065), 0.5px 4.8px 8.8px -13px rgba(0, 0, 0, 0.08),
                        0.9px 8.5px 15.6px -13px rgba(0, 0, 0, 0.095), 1.7px 15.9px 29.2px -13px rgba(0, 0, 0, 0.115),
                        4px 38px 70px -13px rgba(0, 0, 0, 0.16);

                    --floatBoxBorder: thin solid rgb(103 103 103 / 78%);
                    --outlineShadow: 1px 1px 3px #ccc;

                    //resize: both;
                    pointer-events: all;

                    opacity: 0;
                    transition: opacity 200ms ease-in;
                    position: absolute;
                    top: 100px;
                    left: 150px;
                    z-index: 104;
                    box-shadow: var(--floatBoxShadow);

                    //overflow: hidden;
                    min-width: 300px;
                    min-height: 40px;

                    overflow: visible;
                    max-width: 300px;

                    border-radius: var(--edit-fz-border-radius-small);
                    font-family: Open Sans, serif;
                }
            `],t};var xi=U`
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" fill="#ffffff">
    <path d="M8.25 5.96118H9.75V7.46118H8.25V5.96118ZM8.25 8.96118H9.75V13.4612H8.25V8.96118ZM9 2.21118C4.86 2.21118 1.5 5.57118 1.5 9.71118C1.5 13.8512 4.86 17.2112 9 17.2112C13.14 17.2112 16.5 13.8512 16.5 9.71118C16.5 5.57118 13.14 2.21118 9 2.21118ZM9 15.7112C5.6925 15.7112 3 13.0187 3 9.71118C3 6.40368 5.6925 3.71118 9 3.71118C12.3075 3.71118 15 6.40368 15 9.71118C15 13.0187 12.3075 15.7112 9 15.7112Z"
    fill="#ffffff" />
  </svg>
`,bi=U`
  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#ffffff">
    <path d="M0 0h24v24H0V0z" fill="none" />
    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" />
  </svg>
`;var Ei=wi(T),ut=class extends Ei{constructor(t){super();this.isLoading=!0;this.childEl=t,t&&(this.childEl._floatingEditor=this)}disconnectedCallback(){this.removeHighlight(),super.disconnectedCallback()}firstUpdated(t){this.isLoading=!1,this.body.appendChild(this.childEl),vi(this.shadowRoot,this,"#handle",void 0,this.childEl.floatChildrenContainer),super.firstUpdated(t)}getChildEl(){return this.childEl}highlight(){this.childEl.widget&&this.childEl.widget.classList.add("highlight")}removeHighlight(){this.childEl.widget&&this.childEl.widget.classList.remove("highlight")}goToDocumentation(){}getDocumentationUrl(){}render(){var t;return U`
            ${this.isLoading?U`<div class="loading"></div>`:""}
            <div
                id="handle"
                style="${this.childEl._handleStyle}"
                @mouseover="${this.highlight}"
                @mouseleave="${this.removeHighlight}">
                <span class="conf-name"> ${this.title||((t=this.childEl.widget)==null?void 0:t.widgetTitle)||""} </span>
                <div class="floating-editor-actions">
                    ${this.getDocumentationUrl()?U`<div class="documentation-url" style="display: flex" @click=${this.goToDocumentation}>
                              ${xi}
                          </div>`:""}
                    <div class="close" @click=${this.close}> ${bi} </div>
                </div>
            </div>
            <div id="body"></div>
        `}};ut.styles=[Ei.styles,it`
            :host {
            }

            .floating-editor-actions {
                display: flex;
                align-items: center;
                align-self: self-end;
            }

            .close,
            .documentation-url {
                cursor: pointer;
                color: var(--edit-fz-color-neutral-0);
                border: none;
                background: none;

                &:hover {
                    color: black;
                }
            }

            .save {
                position: absolute;
                right: 60px;
                font-size: 14px;
                cursor: pointer;
                color: var(--edit-fz-color-neutral-0);
                border: none;
                background: none;
            }

            .save[disabled] {
                cursor: default;
                color: gray;
            }

            #handle {
                background-color: var(--edit-fz-color-primary-3);
                border-radius: var(--edit-fz-border-radius-small) var(--edit-fz-border-radius-small) 0 0;
                height: 30px;
                display: flex;
                align-items: center;
                padding: var(--edit-fz-spacing-4x-small) var(--edit-fz-spacing-small);
                justify-content: space-between;

                white-space: nowrap;

                font-family: Open Sans, serif;
                font-size: 14px;
                font-style: normal;
                /*font-weight: 600;*/
                line-height: 21px;
                letter-spacing: 0;
                text-align: left;
                color: var(--edit-fz-color-neutral-0);
                cursor: grab;
            }

            #handle:active {
                cursor: grabbing;
            }

            #body {
                padding: var(--edit-fz-spacing-small);
                background-color: var(--edit-fz-color-neutral-0);
                border-radius: 0 0 var(--edit-fz-border-radius-small) var(--edit-fz-border-radius-small);
                max-height: 540px;
                overflow: auto;
            }
            .loading {
                width: 100%;
                height: calc(100% - 2em);
                background: var(--loading-bg-color, rgba(0, 0, 0, 0.4));
                /* min-height: 100px; */
                position: absolute;
                z-index: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .loading::after {
                content: "autorenew";
                font-family: "Material Icons", sans-serif;
                font-size: 40px;
                text-shadow: 0 0 14px #fff, 0 0 14px #fff, 0 0 20px #fff;
                animation: rotating 2s ease-in-out infinite;
            }
            @keyframes rotating {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }
            .btn {
                margin: 0 1em;
                width: 10%;
                text-align: center;
            }

            input,
            select {
                background: transparent;
                border: none;
                color: var(--edit-fz-color-neutral-0);
                outline: none;
                padding: 0.6em;
                margin: 0.4em;
                width: 40%;
            }

            input:focus {
                outline: none;
            }
        `],_t([_i("#body")],ut.prototype,"body",2),_t([Pt()],ut.prototype,"isLoading",2),_t([Pt()],ut.prototype,"title",2);function Ai(i){return{top:"0%",bottom:"-100%",start:"0%",middle:"-50%",end:"-100%"}[i]}function qs(i){var n,s;let t="absolute";i.floatPos.isFixedToViewPort&&(t="fixed");let e=`position: ${t};`;if(i.floatPos.pos.top!==void 0){let a=i.floatPos.pos.top;typeof a=="number"&&(a=a+"px"),t==="fixed"&&a.startsWith("0")?e+=`top: calc(${a} + var(--edit-fz-system-control-bar-height, 0px));`:e+=`top: ${a};`,a.endsWith("px")&&(e+=`--floating-widget-top-offset: ${a};`)}if(i.floatPos.pos.right!==void 0){let a=i.floatPos.pos.right;typeof a=="number"&&(a=a+"px"),e+=`right: ${a};`}if(i.floatPos.pos.bottom!==void 0){let a=i.floatPos.pos.bottom;typeof a=="number"&&(a=a+"px"),e+=`bottom: ${a};`}if(i.floatPos.pos.left!==void 0){let a=i.floatPos.pos.left;typeof a=="number"&&(a=a+"px"),e+=`left: ${a};`}if(i.floatPos.padding!==void 0){let a=i.floatPos.padding.top||"0",l=i.floatPos.padding.right||"0",d=i.floatPos.padding.bottom||"0",u=i.floatPos.padding.left||"0";e+=`padding: ${a} ${l} ${d} ${u};`}let r=((n=i.floatPos.originPoint)==null?void 0:n[0])||"0",o=((s=i.floatPos.originPoint)==null?void 0:s[1])||"0";return e+=`transform: translate(${Ai(r)}, ${Ai(o)});`,e}function Gr(i){return`${i.rowStart} / ${i.colStart} / ${i.rowEnd} / ${i.colEnd}`}function Gs(i,t){let e="";if(i==null?void 0:i.hasOwnProperty("rowStart")){i.hasOwnProperty("layer")&&(e+=`z-index: ${i.layer};`),i.hasOwnProperty("minHeight")&&(e+=`min-height: ${i.minHeight};`),i.hasOwnProperty("padding")&&(e+=`--fz-tmp-padd-top: ${i.padding[0]};
                --fz-tmp-padd-right: ${i.padding[1]};
                --fz-tmp-padd-bottom: ${i.padding[2]};
                --fz-tmp-padd-left: ${i.padding[3]};`);let r=Object.assign({},i);if(t){let o=1-r.rowStart;o>0?(r.rowStart+=o,r.rowEnd+=o):(r.rowStart=1,r.rowEnd+=o)}return e+="grid-area: "+Gr(r),e}}var Qr=class{static isBackgroundString(t){return!!(t&&typeof t=="string")}static isBackgroundImage(t){return!!(t&&typeof t=="object"&&(t==null?void 0:t.image))}static isBackgroundVideo(t){return!!(t&&typeof t=="object"&&(t==null?void 0:t.video))}};function Hr(i){return!(typeof i!="object"||i instanceof Array)}var Ci=class{filterOutNonSupportedKeys(t,e){let r=Object.create({});return Hr(t)?(Object.keys(t).forEach(o=>{e.indexOf(o)>=0?r[o]=t[o]:console.warn("Warning - unsupported key provided to configuration: ",o)}),r):Object.create({})}},Ti=Ci;function V(i){let t={};return Object.keys(i).forEach(e=>{t[i[e]]=e}),t}var oe=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics"];var ne={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad"},Br={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},se={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent"},Yr={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},Jr={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},Kr={444:"CHROMA_444",420:"CHROMA_420"},Zr={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"};var Ks=V(Kr),Zs=V(Zr),Si=V(ne),Li=V(Br),$t=V(se),Xs=V(Yr),ta=V(Jr);var jt=class extends Ti{constructor(t){super();let e=this.filterOutNonSupportedKeys(t,oe);Object.assign(this,{secure:!0},e)}extend(t){let e=this.filterOutNonSupportedKeys(t,oe);return new jt(Object.assign({},this,e))}setCname(t){return this.cname=t,this}setSecureDistribution(t){return this.secureDistribution=t,this}setPrivateCdn(t){return this.privateCdn=t,this}setSignUrl(t){return this.signUrl=t,this}setLongUrlSignature(t){return this.longUrlSignature=t,this}setShorten(t){return this.shorten=t,this}setUseRootPath(t){return this.useRootPath=t,this}setSecure(t){return this.secure=t,this}setForceVersion(t){return this.forceVersion=t,this}},Pi=jt;var y=class{constructor(t){this.values=[],this.delimiter=":",this.hasValue(t)&&this.addValue(t)}toString(){return this.values.join(this.delimiter)}hasValue(t){return typeof t!="undefined"&&t!==null&&t!==""}addValue(t){return Array.isArray(t)?this.values=this.values.concat(t):this.values.push(t),this.values=this.values.filter(e=>this.hasValue(e)),this}setDelimiter(t){return this.delimiter=t,this}};var $i=class extends Error{constructor(t="Unsupported"){super(t)}};function Z(i){return new $i(i)}function ji(){return this._qualifierModel||{error:Z(`unsupported qualifier ${this.constructor.name}`)}}var ae=class{constructor(){this._qualifierModel={}}toJson(){return ji.apply(this)}};var g=class extends ae{constructor(t,e){super();this.delimiter="_",this.key=t,e instanceof y?this.qualifierValue=e:(this.qualifierValue=new y,this.qualifierValue.addValue(e))}toString(){let{key:t,delimiter:e,qualifierValue:r}=this;return`${t}${e}${r.toString()}`}addValue(t){return this.qualifierValue.addValue(t),this}};var b=class extends g{constructor(t,e){let r;e?r=new y([t,`${e}`]).setDelimiter(":"):r=t;super("fl",r);this.flagValue=e}toString(){return super.toString().replace(/\./,"%2E")}getFlagValue(){return this.flagValue}};function Fi(i,t){let e=Array.from(i.entries());return t.forEach(r=>{e.push(["fl",r])}),e.sort().map(r=>r[1])}function Oi(){return this._actionModel&&Object.keys(this._actionModel).length?this._actionModel:{error:Z(`unsupported action ${this.constructor.name}`)}}var le=class{constructor(){this._actionModel={}}toJson(){return Oi.apply(this)}};var S=class extends le{constructor(){super(...arguments);this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(t){return this.actionTag=t,this}toString(){return this.prepareQualifiers(),Fi(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(t){if(typeof t=="string"){let[e,r]=t.toLowerCase().split("_");e==="fl"?this.flags.push(new b(r)):this.qualifiers.set(e,new g(e,r))}else this.qualifiers.set(t.key,t);return this}addFlag(t){return typeof t=="string"?this.flags.push(new b(t)):t instanceof b&&this.flags.push(t),this}addValueToQualifier(t,e){return this.qualifiers.get(t).addValue(e),this}};var ce=class extends S{constructor(t){super();this.addQualifier(new g("b",new y(t).setDelimiter("_")))}};function Ft(i){return i&&(i.match(/^#/)?`rgb:${i.substr(1)}`:i)}var Ot=class{constructor(t){this.raw=t}toString(){return this.raw}toJson(){return{error:Z(`unsupported action ${this.constructor.name}`)}}};function Ii(i){let t=i;return"error"in t&&!!t.error}var Q=class{constructor(){this.actions=[]}addAction(t){let e;if(typeof t=="string"){if(t.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";e=new Ot(t)}else e=t;return this.actions.push(e),this}addTransformation(t){return t instanceof Q?this.actions=this.actions.concat(t.actions):this.actions.push(new Ot(t)),this}toString(){return this.actions.map(t=>t.toString()).filter(t=>t).join("/")}animated(t){return this.addAction(t)}border(t){return this.addAction(t)}reshape(t){return this.addAction(t)}resize(t){return this.addAction(t)}quality(t){return this.addAction(t)}roundCorners(t){return this.addAction(t)}overlay(t){return this.addAction(t)}underlay(t){return t.setLayerType("u"),this.addAction(t)}addVariable(t){return this.addAction(t)}conditional(t){return this.addAction(t)}effect(t){return this.addAction(t)}adjust(t){return this.addAction(t)}rotate(t){return this.addAction(t)}namedTransformation(t){return this.addAction(t)}delivery(t){return this.addAction(t)}backgroundColor(t){return this.addAction(new ce(Ft(t)))}psdTools(t){return this.addAction(t)}extract(t){return this.addAction(t)}addFlag(t){let e=new S,r=t;return typeof t=="string"&&(r=new b(t)),e.addQualifier(r),this.addAction(e)}customFunction(t){return this.addAction(t)}transcode(t){return this.addAction(t)}videoEdit(t){return this.addAction(t)}toJson(){let t=[];for(let e of this.actions){let r=e.toJson();if(Ii(r))return r;t.push(r)}return{actions:t}}};var ue=class extends Q{};var de=class extends Q{};function Ri(i){return i.match(/^https?:\//)}function ki(i){return i.indexOf("/")<0}function Vi(i){return i.match(/^v[0-9]+/)}function zi(i,t){let e=t.secure,r=t.privateCdn,o=t.cname,n=t.secureDistribution;return!e&&!o?`http://res.cloudinary.com/${i}`:e&&!n&&r?`https://${i}-res.cloudinary.com`:e&&!n?`https://res.cloudinary.com/${i}`:e&&n&&r?`https://${n}`:e&&n?`https://${n}/${i}`:!e&&o?`http://${o}/${i}`:"ERROR"}function Mi(i){return i||"image"}function Di(i){return i||"upload"}function Ui(i,t,e){let r=e!==!1;return t?`v${t}`:Vi(i)||Ri(i)||ki(i)?"":r?"v1":""}function X(i,t,e){let r=t>>0,o=String(typeof e!="undefined"?e:" ");return i.length>r?String(i):(r=r-i.length,r>o.length&&(o+=Xr(o,r/o.length)),o.slice(0,r)+String(i))}function Xr(i,t){let e=t,r="";for(;e>0;)r+=i,e--;return r}var to="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fe={},Ni=0;to.split("").forEach(i=>{let t=Ni.toString(2);t=X(t,6,"0"),fe[t]=i,Ni++});function Wi(i){if(i.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return i.split(".").reverse().map(t=>{let e=+t;if(isNaN(e)||e<0)throw"Invalid version number provided";return X(t,2,"0")}).join(".")}function pe(i){let t="",r=i.split(".").length*6,o=Wi(i),s=parseInt(o.split(".").join("")).toString(2);if(s=X(s,r,"0"),s.length%6!=0)throw"Version must be smaller than 43.21.26)";return s.match(/.{1,6}/g).forEach(a=>{t+=fe[a]}),t}function qi(i){let t={sdkSemver:i.sdkSemver,techVersion:i.techVersion,sdkCode:i.sdkCode,feature:"0"};return i.accessibility&&(t.feature="D"),i.lazyload&&(t.feature="C"),i.responsive&&(t.feature="A"),i.placeholder&&(t.feature="B"),t}var Gi="1.8.0";function eo(){let i="0.0.0";if(typeof window!="undefined")return i;try{return process.versions.node||i}catch(t){return i}}function io(i){let t={techVersion:eo(),sdkCode:"T",sdkSemver:Gi.split("-")[0],responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return i?Object.assign(Object.assign({},t),i):t}function Qi(i){let t=io(i),e=qi(t);try{let r=ro(e.techVersion),o=pe(e.sdkSemver),n=pe(r),s=e.feature;return`A${e.sdkCode}${o}${n}${s}`}catch(r){return"E"}}function ro(i){let t=i.split(".");return`${t[0]}.${t[1]}`}var Hi={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"},me=class{constructor(t,e={},r){this.setPublicID(t),this.setCloudConfig(e),this.setURLConfig(r)}setURLConfig(t){return this.urlConfig=new Pi(t),this}setCloudConfig(t){return this.cloudName=t.cloudName,this.apiKey=t.apiKey,this.apiSecret=t.apiSecret,this.authToken=t.authToken,this}setPublicID(t){return this.publicID=t?t.toString():"",this}setDeliveryType(t){return this.deliveryType=t,this}setSuffix(t){return this.suffix=t,this}setSignature(t){return this.signature=t,this}setVersion(t){return t&&(this.version=t),this}setAssetType(t){return t&&(this.assetType=t),this}sign(){return this}toURL(t={}){return this.createCloudinaryURL(null,t.trackedAnalytics)}validateAssetForURLCreation(){if(typeof this.cloudName=="undefined")throw"You must supply a cloudName when initializing the asset";let t=this.suffix&&this.suffix.indexOf(".")>=0,e=this.suffix&&this.suffix.indexOf("/")>=0;if(t||e)throw"`suffix`` should not include . or /"}getResourceType(){let t=Mi(this.assetType),e=Di(this.deliveryType),r=!!this.suffix,o=`${t}/${e}`,n=Hi[`${t}/${e}`],s=this.urlConfig.useRootPath,a=this.urlConfig.shorten;if(s){if(o==="image/upload")return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${o} instead`)}if(a&&o==="image/upload")return"iu";if(r){if(n)return n;throw new Error(`URL Suffix only supported for ${Object.keys(Hi).join(", ")}, Provided: ${o} instead`)}return o}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(t,e){if(!this.publicID)return"";this.validateAssetForURLCreation();let r=zi(this.cloudName,this.urlConfig),o=t?t.toString():"",n=Ui(this.publicID,this.version,this.urlConfig.forceVersion),s=this.publicID.replace(/,/g,"%2C"),a=[r,this.getResourceType(),this.getSignature(),o,n,s,this.suffix].filter(l=>l).join("/");if(typeof t=="string")return a;{let l=encodeURI(a).replace(/\?/g,"%3F").replace(/=/g,"%3D");return this.urlConfig.analytics!==!1&&!s.includes("?")?`${l}?_a=${Qi(e)}`:l}}};function Bi(){return new b("ignore_aspect_ratio")}function Yi(){return new b("lossy")}function Ji(){return new b("preserve_transparency")}function Ki(i){return new b("progressive",i)}function Zi(){return new b("region_relative")}function Xi(){return new b("relative")}var he=class extends y{constructor(t){super(t);this.val=t}getValue(){return this.val}};var ge=class extends S{constructor(t,e,r){super();this._actionModel={};let o;e instanceof he?o=e.getValue():o=e,this._actionModel.actionType=Li[t],this._actionModel[r]=o,this.addQualifier(new g(t,e))}};var ye=class extends b{constructor(t){super("progressive",t)}};var It=class extends ge{constructor(t,e){super(t,e,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(Yi()),this}progressive(t){return t instanceof ye?(this._actionModel.progressive={mode:t.getFlagValue()},this.addFlag(t)):(this._actionModel.progressive={mode:t},this.addFlag(Ki(t))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(Ji()),this}static fromJson(t){let{formatType:e,lossy:r,progressive:o,preserveTransparency:n}=t,s;return e?s=new this("f",e):s=new this("f"),o&&(o.mode?s.progressive(o.mode):s.progressive()),r&&s.lossy(),n&&s.preserveTransparency(),s}};var dt=class extends me{constructor(t,e,r,o){super(t,e,r);this.transformation=o}animated(t){return this.transformation.animated(t),this}border(t){return this.transformation.border(t),this}reshape(t){return this.transformation.reshape(t),this}resize(t){return this.transformation.resize(t),this}quality(t){return this.addAction(new It("q",t)),this}format(t){return this.addAction(new It("f",t)),this}roundCorners(t){return this.transformation.roundCorners(t),this}overlay(t){return this.transformation.overlay(t),this}addVariable(t){return this.transformation.addVariable(t),this}conditional(t){return this.transformation.conditional(t),this}effect(t){return this.transformation.effect(t),this}adjust(t){return this.transformation.adjust(t),this}rotate(t){return this.transformation.rotate(t),this}namedTransformation(t){return this.transformation.namedTransformation(t),this}delivery(t){return this.transformation.delivery(t),this}backgroundColor(t){return this.transformation.backgroundColor(t),this}psdTools(t){return this.transformation.psdTools(t),this}extract(t){return this.transformation.extract(t),this}addFlag(t){return this.transformation.addFlag(t),this}customFunction(t){return this.transformation.customFunction(t),this}addAction(t){return this.transformation.addAction(t),this}addTransformation(t){return this.transformation.addTransformation(t),this}toString(){return this.transformation.toString()}underlay(t){return this.transformation.underlay(t),this}toURL(t={}){return this.createCloudinaryURL(this.transformation,t==null?void 0:t.trackedAnalytics)}};var ve=class extends dt{constructor(t,e,r){super(t,e,r,new ue)}};var _e=class extends dt{constructor(t,e,r){super(t,e,r,new de);this.assetType="video"}transcode(t){return this.transformation.transcode(t),this}videoEdit(t){return this.transformation.videoEdit(t),this}};var Rt=class{constructor(t){t&&(this.cloudinaryConfig=t)}image(t){return new ve(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(t){return new _e(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(t){return this.cloudinaryConfig=t,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}};function we(i){let t=i.toString();return t.match(/[A-Z]/gi)||t.length>1&&t[0]==="0"?t:!isNaN(parseFloat(t))&&t.indexOf(":")===-1&&t.indexOf(".")===-1?`${t}.0`:t}var xe=class extends y{};var ft=class extends S{constructor(t,e,r){super();this._actionModel={dimensions:{}},this._actionModel.actionType=Si[t]||t,this.addQualifier(new g("c",t)),e&&this.width(e),r&&this.height(r)}height(t){return this._actionModel.dimensions.height=t,this.addQualifier(new g("h",t))}width(t){return this._actionModel.dimensions.width=t,this.addQualifier(new g("w",t))}aspectRatio(t){if(t instanceof xe)return this._actionModel.dimensions.aspectRatio=`${t}`,this.addQualifier(new g("ar",t));if(typeof t=="number"||typeof t=="string")return this._actionModel.dimensions.aspectRatio=we(t),this.addQualifier(new g("ar",we(t)));if(t instanceof b)return this._actionModel.dimensions.aspectRatio=`${t.qualifierValue}`,this.addFlag(t)}relative(){return this._actionModel.relative=!0,this.addFlag(Xi())}regionRelative(){return this._actionModel.regionRelative=!0,this.addFlag(Zi())}static fromJson(t){let{actionType:e,dimensions:r,relative:o,regionRelative:n}=t,{aspectRatio:s,width:a,height:l}=r,d=ne[e]||e,u=new this(d,a,l);return s&&u.aspectRatio(s==="ignore_aspect_ratio"?Bi():s),o&&u.relative(),n&&u.regionRelative(),u}};var H=class extends g{constructor(t){super("g",new y(t))}};var pt=class extends H{constructor(){super("auto")}autoFocus(...t){return this.addValue(t),this}};var mt=class extends H{constructor(t){super(t)}fallbackGravity(t){return this.addValue(t.qualifierValue),this}};var be=class extends H{constructor(t){super(t)}};function Ee(...i){let t=[...i];return new mt(t)}function kt(){return new pt}var z=class extends y{constructor(t){super();this.name=t}toString(){return this.name}};function tr(){return new z("ocr_text")}function oo(i){return i&&`${i}`.split(":")[0]==="auto"}function no(i){let t=Ae(i);return["north","center","east","west","south","north_west","south_east","south_west","north_east"].includes(t)}function Ae(i){return`${i}`.replace("g_","")}function so(i){return{compass:Ae(i),gravityType:"direction"}}function ao(i){return Ae(i)==="ocr_text"}function lo(){return{gravityType:"ocr"}}function co(i){return`${i.qualifierValue}`.split(":")[0]==="auto"}function uo(i){let e=i.toString().split("_"),r={object:e[0]};return e.length>1&&(e[1]==="avoid"?r.avoid=!0:r.weight=+e[1]),r}function er(i){let t,e=i==="auto"?new pt:i;`${i}`.startsWith("auto:")?t=`${i}`.split(":").filter(o=>o!=="auto"):t=e.qualifierValue.values.filter(o=>o!=="auto");let r=t.map(uo);return{gravityType:"auto",autoFocus:r}}function fo(i){let t=`${i}`.split(":").includes("auto"),e=i.qualifierValue.values,r=t?e.slice(0,e.length-1):e,o={gravityType:"object",focusOnObjects:r.map(n=>`${n}`)};if(t){let n=e[e.length-1].values.slice(1),s=kt().autoFocus(...n);o.fallbackGravity=er(s)}return o}function po(i){let e=i.split(":").map(r=>new z(r));return new mt(e)}function ir(i){return no(i)?so(i):ao(i)?lo():oo(i)||co(i)?er(i):fo(typeof i=="string"?po(i):i)}var ht=class extends y{constructor(t,e){super();this._weight=e,this.focusOn=t,this.shouldAvoid=!1}static focusOn(t,e){return new ht(t,e)}shouldAddWeight(){return typeof this._weight=="number"||typeof this._weight=="string"||this.shouldAvoid}getName(){return this.focusOn.name}getWeight(){return this.shouldAvoid?"avoid":this._weight}toString(){return this.shouldAddWeight()?`${this.getName()}_${this.getWeight()}`:`${this.getName()}`}weight(t){return this._weight=t,this}avoid(){return this.shouldAvoid=!0,this}};var Ce=class extends y{constructor(t){super();this.val=t}toString(){return this.val}};function mo(i){return i.gravityType==="direction"}function ho(i){return i.gravityType==="ocr"}function go(i){return i.gravityType==="auto"}function yo(i){let{object:t,weight:e,avoid:r}=i,o=new ht(new z(t));return(e||e===0)&&o.weight(e),r&&o.avoid(),o}function rr(i){let e=(i.autoFocus||[]).map(yo);return kt().autoFocus(...e)}function vo(i){let t=(i.focusOnObjects||[]).map(r=>new z(r)),e=Ee(...t);if(i.fallbackGravity){let r=rr(i.fallbackGravity);e.fallbackGravity(r)}return e}function or(i){return mo(i)?new be(new Ce(i.compass)):ho(i)?Ee(tr()):go(i)?rr(i):vo(i)}var gt=class extends ft{gravity(t){this._actionModel.gravity=ir(t);let e=typeof t=="string"?new g("g",t):t;return this.addQualifier(e)}static fromJson(t){let e=super.fromJson.apply(this,[t]);return t.gravity&&e.gravity(or(t.gravity)),e}};var Vt=class extends y{constructor(t){super();this.val=t}toString(){return this.val}};function nr(){return new Vt("vflip")}function sr(){return new Vt("hflip")}var Te=class extends gt{x(t){return this._actionModel.x=t,this.addQualifier(new g("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new g("y",t))}zoom(t){return this._actionModel.zoom=t,this.addQualifier(new g("z",t))}static fromJson(t){let e=super.fromJson.apply(this,[t]);return t.x&&e.x(t.x),t.y&&e.y(t.y),t.zoom&&e.zoom(t.zoom),e}};var Se=class extends gt{x(t){return this._actionModel.x=t,this.addQualifier(new g("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new g("y",t))}static fromJson(t){let e=super.fromJson.apply(this,[t]);return t.x&&e.x(t.x),t.y&&e.y(t.y),e}};var Le=class extends Se{};function ar(i,t){return new Te("crop",i,t)}function lr(i,t){return new ft("fit",i,t)}function cr(i,t){return new Le("lfill",i,t)}var ur=class extends S{constructor(){super()}radius(t,e,r,o){let n=new y;return typeof t!==void 0&&n.addValue(t),typeof e!==void 0&&n.addValue(e),typeof r!==void 0&&n.addValue(r),typeof o!==void 0&&n.addValue(o),this.addQualifier(new g("r").addValue(n)),this}max(){return this.addQualifier(new g("r","max"))}},dr=ur;function fr(){return new dr().max()}var yt=class extends S{constructor(t,e){super();this._actionModel={},this._actionModel.actionType=$t[t]||t;let r=this.createEffectQualifier(t,e);this.addQualifier(r)}createEffectQualifier(t,e){let r;return e?r=new y([t,`${e}`]).setDelimiter(":"):r=new y(t),new g("e",r)}static fromJson(t){let{actionType:e,level:r,strength:o}=t,n=se[e]||e;return new this(n,r||o)}};var vt=class extends yt{constructor(t,e){super(t,e);this.LEVEL_NAME="level",this._actionModel={},this.effectType=t,this._actionModel.actionType=$t[t]||t,e&&this.setLevel(e)}setLevel(t){this._actionModel[this.LEVEL_NAME]=t;let e=this.createEffectQualifier(this.effectType,t);return this.addQualifier(e),this}};var Pe=class extends vt{level(t){return this._actionModel.level=t,this.setLevel(t)}};var $e=class extends Pe{color(t){return this._actionModel.color=t,this.addQualifier(new g("co",new y(Ft(t))))}static fromJson(t){let{actionType:e,level:r,color:o}=t,n=new this(e,r);return o&&n.color(o),n}};var je=class extends vt{constructor(){super(...arguments);this.LEVEL_NAME="strength"}strength(t){return this.setLevel(t)}};function pr(i){return new $e("colorize",i)}function mr(i){return new yt("art",i)}var Fe="a",hr=class extends S{constructor(t){super();this.addQualifier(new g(Fe,t))}mode(t){return this.addValueToQualifier(Fe,t)}angle(t){return this.addValueToQualifier(Fe,t)}},gr=hr;function Oe(i){return new gr().mode(i)}function yr(i){return new je("sharpen",i)}var Ie=class{constructor(t){this.image=t}optimize(){return this.isOptimized=!0,this}sharpen(){return this.sharp=!0,this}maxWidth(t){return this._maxWidth=t,this}maxHeight(t){return this._maxHeight=t,this}toString(){var o,n,s,a,l,d;if(typeof this.image=="string"&&(this.image={bankCategory:"images",url:this.image}),this.image.optimized_url&&!this.isOptimized)return this.image.optimized_url;if(!$.isCloudinaryImage(this.image.url))return this.image.url;let t=$.getImage(this.image),e=t.toURL().endsWith(".svg");if(((o=this.image.transformation)==null?void 0:o.flipY)&&t.rotate(Oe(nr())),((n=this.image.transformation)==null?void 0:n.flipX)&&t.rotate(Oe(sr())),(s=this.image.transformation)==null?void 0:s.crop){let{x:u,y:h,width:m,height:_,aspect:w,radius:c}=this.image.transformation.crop,f=ar();if(m&&f.width(m),_&&f.height(_),f.x(u||0),f.y(h||0),w&&f.aspectRatio(w),t.resize(f),c=="max"&&t.roundCorners(fr()),e&&(m||_)){let v=lr();this._maxWidth&&v.width(this._maxWidth),this._maxHeight&&v.height(this._maxHeight),t.resize(v),t.format("auto").quality("auto")}}if(this._maxWidth||this._maxHeight){let u=cr();this._maxWidth&&u.width(this._maxWidth),this._maxHeight&&u.height(this._maxHeight),t.resize(u)}if(((a=this.image.transformation)==null?void 0:a.artisticFilter)&&t.effect(mr(this.image.transformation.artisticFilter)),(d=(l=this.image.transformation)==null?void 0:l.tint)==null?void 0:d.color){let u="#"+this.image.transformation.tint.color.substring(1);t.effect(pr(this.image.transformation.tint.alpha).color(u))}e||t.format("auto").quality("auto"),this.sharp&&t.adjust(yr());let r=t.toURL();return r=$.prepareCloudinaryUrl(r,this.image.url),r}};var _o=["mov","mp4","webm"],A=class{static getImage(t){let e=A.getPublicId(t.url);return this.cloudinary.image(e)}static getVideo(t){let e=A.getPublicId(t.url);return this.cloudinary.video(e)}getTransformedUrl(t,e,r,o=!1){let n=new Ie(t);return e&&n.maxWidth(e),r&&n.maxHeight(r),o&&n.optimize(),n.toString()}static isCloudinaryFetchUrl(t){return A.cloudinaryFetchUrlRegex.test(t)}static prepareCloudinaryUrl(t,e){if(this.cloudinaryFetchUrlRegex.test(e)){t=t.replace("/upload/","/fetch/");let r="";try{let o=e.split(this.cloudinaryFetchUrlRegex).pop(),n=new URL(o);r=encodeURIComponent(decodeURIComponent(n.search))}catch(o){console.error(o)}t=t.concat(r)}return t}static getPublicId(t){return t.replace(A.cloudinaryUrlRegex,"").split("?")[0]}loadVideoPlayerScript(){return new Promise((t,e)=>{if(document.querySelector(`script[src="${A.videoPlayerScriptUrl}"]`))t();else{let r=document.createElement("script");r.src=A.videoPlayerScriptUrl,r.onload=()=>{t()},r.onerror=o=>{e(o)},document.head.appendChild(r)}})}createVideoPlayer(t,e,r,o){let n=cloudinary.videoPlayer(e,et(tt({},r),{showLogo:!1,cloud_name:"folloze"})),s=A.getPublicId(t);return n.source(s,{sourceTypes:_o,transformation:o}),n}getVideoPlayer(t,e,r={},o={}){return this.loadVideoPlayerScript().then(()=>this.createVideoPlayer(t,e,r,o))}getOptimizedVideoUrl(t,e){let o={"0% 0%":"north_west","50% 0%":"north","100% 0%":"north_east","0% 50%":"west","50% 50%":"center","100% 50%":"east","0% 100%":"south_west","50% 100%":"south","100% 100%":"south_east"}[e],n=t.split("/upload/"),s="q_auto",a=`c_fill,g_${o},h_688,w_1432`;return n[0]+`/upload/${s}/${a}/`+n[1]}getVideoThumbnail(t){return t.substr(0,t.lastIndexOf("."))+".jpg"}static isCloudinaryImage(t){return A.cloudinaryUrlRegex.test(t)}async uploadFileInChunks(t,e,r,o,n){let s=10*1024*1024,a=Math.random().toString(36).substring(2,15),l=0,d=[],u=[],h=new AbortController,m=0;for(;l<t.size&&!h.signal.aborted;){let f=m++,v=Math.min(l+s,t.size),p=t.slice(l,v),L=new FormData;L.set("file",p,t.name),Object.entries(e.params).forEach(([O,br])=>{L.set(O,br)});let C=`bytes ${l}-${v-1}/${t.size}`,B=Ve({url:e.put_url,method:"POST",headers:{"X-Unique-Upload-Id":a,"Content-Range":C},data:L,progressCallback:O=>{u[f]=O},signal:h.signal}).catch(O=>{console.error(O),h.signal.aborted||h.abort(),o==null||o(O.message)});d.push(B),l=v}let _=setInterval(()=>{if(!n)return;let f=u.reduce((p,L)=>p+L,0),v=Math.min(100,Math.floor(f/t.size*100));n(t,v)},500),w=await Promise.all(d);clearInterval(_);let c=w.length===1?w[0]:w.find(f=>f.done);c?r==null||r(c):o==null||o("No upload data returned")}},$=A;$.flzImagesDomain="images.folloze.com",$.cloudinaryImagesDomain="res.cloudinary.com/folloze",$.cloudinaryUrlRegex=new RegExp(`(?:((http|https):)?)//(${A.flzImagesDomain}|${A.cloudinaryImagesDomain})/(image|video).(fetch|upload)/`),$.cloudinaryFetchUrlRegex=new RegExp(`(?:((http|https):)?)//(${A.flzImagesDomain}|${A.cloudinaryImagesDomain})/(image|video).(fetch)/`),$.cloudinary=new Rt({cloud:{cloudName:"folloze"},url:{secureDistribution:A.flzImagesDomain,cname:A.flzImagesDomain,secure:!0,privateCdn:!0,analytics:!1}}),$.videoPlayerScriptUrl="https://cdn.folloze.com/flz/vendors/cld-video-player.light.1.10.6.min.js";var zt=Ut(ke()),Mt=Ut(Er());function Bu(i,t){if(!(i&&Array.isArray(i.rules)))return null;let e="",r=0,o=0,n=i.rules.map((m,_)=>{let w;if(!m.property)throw w=new Error(`Property not specified for rule ${_}`),w.rule=m,w;let c=(0,zt.default)(t,m.property);if(m.property.includes("[]")){let[C,B]=m.property.split("[]");B=B.substring(1),c=(0,zt.default)(t,C).map(O=>B?(0,zt.default)(O,B):O)}let f=m.value;typeof i.transformValueFn=="function"&&(f=i.transformValueFn(f,t,m.property));let v=null;typeof c=="boolean"&&(typeof f=="string"||f instanceof String)&&(f.toLowerCase()==="false"&&(v=!1),f.toLowerCase()==="true"&&(v=!0));let p;switch(m.op){case"eq":p=c==f,v!==null&&(p=p||c==v);break;case"ne":case"neq":p=c!=f,v!==null&&(p=p&&c!=v);break;case"gt":p=c>f;break;case"gte":p=c>=f;break;case"lt":p=c<f;break;case"lte":p=c<=f;break;case"startsWith":p=(0,Mt.default)(c).startsWith(f);break;case"endsWith":p=(0,Mt.default)(c).endsWith(f);break;case"contains":p=(0,Mt.default)(c).includes(f);break;case"present":p=!!c;break;case"empty":case"absent":p=!c;break;case"all":p=Array.isArray(c)&&!c.find(C=>C!==f);break;case"some":p=Array.isArray(c)&&c.includes(f);break;case"none":p=(Array.isArray(c)||c===null||typeof c=="undefined")&&!(c||[]).includes(f);break;case"crosses":{if(console.log(typeof i.previousValueFn),typeof i.previousValueFn!="function")throw new Error('Comparison "crosses" selected, but no function supplied to return previous value');let C=i.previousValueFn(t,m.property);p=f>C&&f<=c,e=`(${_}) ${m.property} was ${C} and became ${c}. crossed ${f}? ${p}
`;break}default:throw w=new Error(`Unknown comparison for rule (${m.op})`),w.rule=m,w}p&&(m.required?r+=1:o+=1);let L=["absent","present"].includes(m.op);return e+=`(${_}) ${m.property} (${c}) ${L?"is":""} ${m.op} ${L?"":f}? ${p}
`,p}),s=i.rules.reduce((m,_)=>m+(_.required?1:0),0),a=i.rules.length-s,l=i.satisfy||"ANY",d=!s||s===r,u=!a||(l==="ALL"?o===a:o>0),h=u&&d;return a>0&&(e+=`Passed ${o} / ${a} (need ${l}, ${u?"pass":"fail"})
`),s>0&&(e+=`Passed ${r} / ${s} required conditions (${d?"pass":"fail"})
`),e+=`Result: ${h?"PASS":"FAIL"}`,i.log&&i.log(e,n),h}function wo(i,t){var r;let e=i.getRootNode();(r=e.querySelector(`slot[name=${t}]`))==null||r.remove(),e!==document&&e&&vr(e)&&wo(e.host,t)}function Ju(i,t,e){_r(i,t,e,[])}var vr=i=>i.host&&i.mode=="open",_r=(i,t,e,r=[])=>{var n;i.shadowRoot&&r.push(i);let o=i.getRootNode();if(o===document){for(let[s,a]of r.entries()){let l=document.createElement("slot");s!==0&&l.setAttribute("slot",e),l.setAttribute("name",e),s===r.length-1&&l.appendChild(t),(n=a.querySelector(`slot[name=${e}]`))==null||n.remove(),a.appendChild(l)}return}o&&vr(o)&&_r(o.host,t,e,r)};function Ku(i){function t(e){if(!(!e||e===document||e===window))return wr(e)?e:t(e.getRootNode().host)}return t(i)}function wr(i){return i.id&&i.classList.contains("widget")}function Zu(i){var t;return i.id&&((t=i.tagName)==null?void 0:t.startsWith("FLZ-"))&&wr(i)}var F=class{},xo=class extends F{constructor(t){super();this.action=j.add_new_section,this.payload={section_name:t.name,section_type:t.type}}},bo=class extends F{constructor(t){super();this.action=j.delete_section,this.payload={section_name:t.name,section_type:t.type}}},Eo=class extends F{constructor(t){super();this.action=j.add_floating_section,this.payload={widget_tag:t.config.widgetTag.toLowerCase(),widget_title:t.widgetTitle}}},Ao=class extends F{constructor(t){super();this.action=j.delete_floating_section,this.payload={widget_tag:t.config.widgetTag.toLowerCase(),widget_title:t.widgetTitle}}},Co=class extends F{constructor(t){super();this.action=j.edit_section,this.payload={section_name:t.name,section_type:t.type}}},To=class extends F{constructor(t){super();this.action=j.edit_editable_component,this.payload={component_tag:t.getChildEl().tagName.toLowerCase(),widget_tag:t.getChildEl().widget.tagName.toLowerCase()}}},So=class extends F{constructor(){super();this.action=j.publish_board}},Lo=class extends F{constructor(){super();this.action=j.preview_board}},Po=class extends F{constructor(t){super();this.action=j.add_personalization_rule_from_designer,this.payload={rule:{attribute_id:t.mergeTagId,attribute_values:t.mergeTagValues}}}};function id(i,t){Xt(i,"track-user-event",{trackedUserEvent:t})}var Dt=class{},$o=class extends Dt{constructor(t){super();this.payload=t,this.action="lead-link-click"}},jo=class extends Dt{constructor(t){super();this.payload=t,this.action="track-download-file"}},Fo=class extends Dt{constructor(t){super();this.payload=t,this.action="track-lead-like-content"}};function nd(i,t,e,r){Lt(i,"track-lead-event",{trackedLeadEvent:t},e,r)}function ld(i,t,e){xr(i,t,!0,e)}function cd(i,t,e){xr(i,t,!1,e)}function xr(i,t,e=!1,r){Lt(i,"analytic-event",{type:t,payload:r,isCustom:e})}function dd(i){let t=Oo(window.location.href,"query"),r=new URL(t).searchParams,o=new URL(i);return r.forEach((n,s)=>{o.searchParams.append(s,n)}),o.toString()}function Oo(i,t){if(!i)return i;let e=new URL(i);return e.searchParams.delete(t),e.toString()}function pd(i){var t,e;return((e=(t=i.viewer_settings)==null?void 0:t.lead_journey)==null?void 0:e.type)==="recommendations"?"ai":"item"}function hd(i){return i.is_content_item===!0?"recommendations":"item"}function gd(i){return i.is_content_item===!0?null:i.id}function vd(i,t,e){var r,o,n,s;return window.follozeWidgetDescriptions[t.toLowerCase()]?!!(e&&((r=e.board)==null?void 0:r.goal)&&((o=e.board)==null?void 0:o.productName)&&((s=(n=e.widgets)==null?void 0:n[i])==null?void 0:s.purpose)):!1}function Io(i){var t,e,r;return!!((r=(e=(t=window.FollozeState)==null?void 0:t.initialState)==null?void 0:e.features)==null?void 0:r[i])}function wd(i){return i.every(t=>Io(t))}var Ro=class{constructor(t){this._onMouseClick=t=>{t.target!==this.host&&!t.composedPath().includes(this.host)&&this.host.close()};this.host=t,t.addController(this)}hostConnected(){setTimeout(()=>{this.addListener()})}hostDisconnected(){this.removeListener()}addListener(){window.addEventListener("click",this._onMouseClick,!0)}removeListener(){window.removeEventListener("click",this._onMouseClick,!0)}};var ko=class{constructor(t){this._onKeyUp=t=>{t.key==="Escape"&&this.host.close()};this.host=t,t.addController(this)}hostConnected(){setTimeout(()=>{this.addListener()})}hostDisconnected(){this.removeListener()}addListener(){window.addEventListener("keyup",this._onKeyUp,!0)}removeListener(){window.removeEventListener("keyup",this._onKeyUp,!0)}};var Vo=class extends q{constructor(){super(...arguments);this.isCookieConsentable=!0}};var Re="gatingFormSubmitted",zo=class extends ee{constructor(){super(...arguments);this.isGatingForm=!0;this.shouldBeShown=!1}connectedCallback(){super.connectedCallback(),P(this,"get-state",void 0,t=>{this.boardId=t.board.id})}incomingEvents(t){super.incomingEvents(t);let e=t.action;e==="widgets-scripts-loaded"&&this.shouldBeShown?this.toggleOnOrOff():e==="item-viewer-new-item"?this.handleNewItem(t.payload):e==="itemViewerClosed"&&this.close()}handleNewItem(t){if(!t.is_gated){this.close();return}this.toggleOnOrOff()}toggleOnOrOff(){P(this,"get-lead",void 0,o=>{this.lead=o});let t=this.isPersistSubmitExists(this.boardId),e=this._data.enableForKnownUsers&&!t,r=this.lead.anon_guest||e;if(console.debug(`show gated form: ${r}, ${this._data.gatingFormDelay} ms`),r){this.show();return}this.close()}show(){let t=this._data.gatingFormDelay||0;this.gatingDelayTimer=setTimeout(()=>{var e,r;this.shouldBeShown=!0,((r=(e=this._data)==null?void 0:e.ctaFormConfig)==null?void 0:r.form_id)!==0&&this.classList.contains("hidden")&&P(this,"floating-widget-manager",{widget:this,command:"show"})},t)}close(){clearTimeout(this.gatingDelayTimer),this.shouldBeShown=!1,this.classList.contains("hidden")||P(this,"floating-widget-manager",{widget:this,command:"hide"})}persistSubmitToLocalStorage(t){let e=JSON.parse(localStorage.getItem(Re)||"[]");e.includes(t)||(e.push(t),localStorage.setItem(Re,JSON.stringify(e)))}isPersistSubmitExists(t){let e=localStorage.getItem(Re);if(!e)return!1;try{if(JSON.parse(e).includes(t))return!0}catch(r){console.error("could not parse gated board ids from local storage")}return!1}};export{zr as a,Jt as b,Kt as c,Zt as d,P as e,Xt as f,Lt as g,yn as h,vn as i,_n as j,wn as k,xn as l,bn as m,te as n,gi as o,q as p,ee as q,Mr as r,ie as s,re as t,Dr as u,Ur as v,Nr as w,vi as x,wi as y,ut as z,Ai as A,qs as B,Gr as C,Gs as D,Qr as E,Ie as F,$ as G,Bu as H,wo as I,Ju as J,Ku as K,wr as L,Zu as M,F as N,xo as O,bo as P,Eo as Q,Ao as R,Co as S,To as T,So as U,Lo as V,Po as W,id as X,Dt as Y,$o as Z,jo as _,Fo as $,nd as aa,ld as ba,cd as ca,dd as da,Oo as ea,pd as fa,hd as ga,gd as ha,vd as ia,Io as ja,wd as ka,Ro as la,ko as ma,Vo as na,zo as oa};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
