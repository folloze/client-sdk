var _={attended_event:0,viewed_recording:2},d=class{constructor(t){this.fetchService=t}trackAttendance(t,i){return this.fetchService.withDisableOnPreview(()=>{let o=t==="create"?"post":"put";return this.fetchService.fetcher[o](`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${i.boardId}/attend_activities`,{widget_id:i.widgetId,event_name:i.eventName,guid:i.guid,activity_type:this.getActivityCode(i.activityType)}).catch(r=>{throw console.error("Could not track event attendence",r),r})})}getActivityCode(t){return _[t]}};var l=(c=>(c[c.viewed_board=1]="viewed_board",c[c.viewed_item=2]="viewed_item",c[c.clicked_on_next_item=3]="clicked_on_next_item",c[c.clicked_on_previous_item=4]="clicked_on_previous_item",c[c.confirmed_cookie_usage=5]="confirmed_cookie_usage",c[c.clicked_on_share_button=6]="clicked_on_share_button",c[c.shared_a_campaign=7]="shared_a_campaign",c[c.liked_an_item=8]="liked_an_item",c[c.clicked_on_cta=9]="clicked_on_cta",c[c.downloaded_an_item=10]="downloaded_an_item",c[c.changed_category=11]="changed_category",c[c.searched_items=12]="searched_items",c))(l||{}),s=(e=>(e[e.clicked_on_logo=17]="clicked_on_logo",e[e.clicked_on_campaign_preview=18]="clicked_on_campaign_preview",e[e.viewed_design_tab=19]="viewed_design_tab",e[e.viewed_content_tab=20]="viewed_content_tab",e[e.changed_board_privacy_settings=47]="changed_board_privacy_settings",e[e.clicked_on_find_more_images=51]="clicked_on_find_more_images",e[e.clicked_on_search_image=52]="clicked_on_search_image",e[e.clicked_on_upload_an_image=53]="clicked_on_upload_an_image",e[e.uploaded_an_image=54]="uploaded_an_image",e[e.saved_campaign_design=76]="saved_campaign_design",e[e.discarded_campaign_design_changes=77]="discarded_campaign_design_changes",e[e.configured_personalization=261]="configured_personalization",e[e.deleted_personalization=262]="deleted_personalization",e[e.created_new_block=282]="created_new_block",e[e.added_rule=283]="added_rule",e[e.added_items_to_visible_to_everyone=284]="added_items_to_visible_to_everyone",e[e.changed_rule=285]="changed_rule",e[e.changed_block_title=286]="changed_block_title",e[e.saved_personalization_changes=290]="saved_personalization_changes",e[e.discarded_personalization_changes=291]="discarded_personalization_changes",e[e.change_rule_set_priority=292]="change_rule_set_priority",e[e.add_new_section=325]="add_new_section",e[e.add_floating_section=326]="add_floating_section",e[e.delete_section=327]="delete_section",e[e.delete_floating_section=328]="delete_floating_section",e[e.edit_section=329]="edit_section",e[e.publish_board=330]="publish_board",e[e.preview_board=331]="preview_board",e[e.edit_editable_component=332]="edit_editable_component",e[e.add_personalization_rule_from_designer=333]="add_personalization_rule_from_designer",e))(s||{}),m=class{constructor(t){this.fetchService=t,this.liveEvent=new d(t)}trackLeadBoardView(t){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/boards/${t}/lead_views`).catch(i=>{throw console.error("could not track lead board view",i),i}))}trackLeadItemView(t,i){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/items/${t}/lead_views`,{guid:i}).catch(o=>{throw console.error("could not track lead item view",o),o}))}trackLeadContentView(t,i,o,r){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/content_items/${t}/lead_views`,{guid:o,item_id:r,source_type:i}).catch(n=>{throw console.error("could not track lead item view",n),n}))}trackUserEvent(t,i){return this.fetchService.fetcher.post("/api/v1/tracking",{event:{id:t,data:i,platform:{id:1,name:"App"}}}).catch(o=>{throw console.error("could not track action",o),o})}trackLeadEvent(t,i){return this.fetchService.fetcher.post("/live_board/v1/tracking",{event:{id:t,data:i,platform:{id:2,name:"Campaign"}}}).catch(o=>{throw console.error("could not track action",o),o})}sendPing(t){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post(`${this.fetchService.options.pingEndpoint}/pings`,{lead_id:t.leadId,board_id:t.boardId,item_id:t.itemId,content_item_id:t.contentItemId,client_guid:t.guid}))}validateSession(){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post("/live_board/v1/session_validations").catch(t=>{throw console.error("could not validate session",t),t}))}createSession(){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post("/live_board/v1/sessions").catch(t=>{throw console.error("could not create session",t),t})).then(t=>{var o;let i=((o=t.headers)==null?void 0:o[this.fetchService.headerSessionGuid])||t.data.guid;return this.fetchService.setSessionGuid(i),t})}updateInvitationUsed(t){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.put(`/live_board/v2/invitation_wrappers/${t}`).catch(i=>{throw console.error("could not update invitation wrapper",i),i}))}sendBeacon(t){var i;if((i=this.fetchService.options)==null?void 0:i.isPreview)return!0;try{let o=`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/lead_events`,r=JSON.stringify({events:t});return navigator.sendBeacon(o,r)}catch(o){console.error("could not send beacon",o)}}trackDownloadFile(t,i,o){return new Promise((r,n)=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/downloads`,{source_type:t,content_item_id:i,item_id:o}).then(()=>{r()}).catch(a=>{console.error("could not track download content",a),n(a)})})}trackDownloadFileV2(t,i,o){return new Promise((r,n)=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/content_items/${i}/downloads`,{source_type:t,item_id:o}).then(()=>{r()}).catch(a=>{console.error("could not track download content",a),n(a)})})}trackLeadLikeContent(t,i,o){return new Promise((r,n)=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/likes`,{source_type:t,content_item_id:i,item_id:o}).then(()=>{r()}).catch(a=>{console.error("could not track like content",a),n(a)})})}trackLeadLikeContentV2(t,i,o){return new Promise((r,n)=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v2/content_items/${i}/likes`,{source_type:t,item_id:o}).then(()=>{r()}).catch(a=>{console.error("could not track like content",a),n(a)})})}publishLeadEvents(t,i,o){return this.fetchService.withDisableOnPreview(()=>this.fetchService.fetcher.post("/live_board/v2/sphere/publish_lead_events",{content_item_id:t,timestamp:i,event_name:o}).catch(r=>{throw console.error("could not update invitation wrapper",r),r}))}};export{l as a,s as b,m as c};
