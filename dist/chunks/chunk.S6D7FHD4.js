import{v as Fi,w as Xe}from"./chunk.BQ5K2J73.js";import{a as tr}from"./chunk.RITOH7QK.js";import{a as N,b as U,e as le,f as wt}from"./chunk.V2USFPSF.js";var xt,Ii=new Uint8Array(16);function ce(){if(!xt&&(xt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!xt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xt(Ii)}var er=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ki(r){return typeof r=="string"&&er.test(r)}var rr=ki;var b=[];for(bt=0;bt<256;++bt)b.push((bt+256).toString(16).substr(1));var bt;function Vi(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(b[r[t+0]]+b[r[t+1]]+b[r[t+2]]+b[r[t+3]]+"-"+b[r[t+4]]+b[r[t+5]]+"-"+b[r[t+6]]+b[r[t+7]]+"-"+b[r[t+8]]+b[r[t+9]]+"-"+b[r[t+10]]+b[r[t+11]]+b[r[t+12]]+b[r[t+13]]+b[r[t+14]]+b[r[t+15]]).toLowerCase();if(!rr(e))throw TypeError("Stringified UUID is invalid");return e}var ir=Vi;function Mi(r,t,e){r=r||{};var i=r.random||(r.rng||ce)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=i[o];return t}return ir(i)}var ue=Mi;var Et=window,At=Et.ShadowRoot&&(Et.ShadyCSS===void 0||Et.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,de=Symbol(),or=new WeakMap,ut=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==de)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(At&&t===void 0){let i=e!==void 0&&e.length===1;i&&(t=or.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&or.set(e,t))}return t}toString(){return this.cssText}},nr=r=>new ut(typeof r=="string"?r:r+"",void 0,de),dt=(r,...t)=>{let e=r.length===1?r[0]:t.reduce((i,o,n)=>i+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+r[n+1],r[0]);return new ut(e,r,de)},pe=(r,t)=>{At?r.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(e=>{let i=document.createElement("style"),o=Et.litNonce;o!==void 0&&i.setAttribute("nonce",o),i.textContent=e.cssText,r.appendChild(i)})},Ct=At?r=>r:r=>r instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return nr(e)})(r):r;var fe,Tt=window,sr=Tt.trustedTypes,Di=sr?sr.emptyScript:"",ar=Tt.reactiveElementPolyfillSupport,he={toAttribute(r,t){switch(t){case Boolean:r=r?Di:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,t){let e=r;switch(t){case Boolean:e=r!==null;break;case Number:e=r===null?null:Number(r);break;case Object:case Array:try{e=JSON.parse(r)}catch(i){e=null}}return e}},lr=(r,t)=>t!==r&&(t==t||r==r),me={attribute:!0,type:String,converter:he,reflect:!1,hasChanged:lr},O=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),((e=this.h)!==null&&e!==void 0?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();let t=[];return this.elementProperties.forEach((e,i)=>{let o=this._$Ep(i,e);o!==void 0&&(this._$Ev.set(o,i),t.push(o))}),t}static createProperty(t,e=me){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){let i=typeof t=="symbol"?Symbol():"__"+t,o=this.getPropertyDescriptor(t,i,e);o!==void 0&&Object.defineProperty(this.prototype,t,o)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(o){let n=this[t];this[e]=o,this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||me}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let t=Object.getPrototypeOf(this);if(t.finalize(),t.h!==void 0&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){let e=this.properties,i=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(let o of i)this.createProperty(o,e[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){let e=[];if(Array.isArray(t)){let i=new Set(t.flat(1/0).reverse());for(let o of i)e.unshift(Ct(o))}else t!==void 0&&e.push(Ct(t));return e}static _$Ep(t,e){let i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(e=>e(this))}addController(t){var e,i;((e=this._$ES)!==null&&e!==void 0?e:this._$ES=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)===null||i===void 0||i.call(t))}removeController(t){var e;(e=this._$ES)===null||e===void 0||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;let e=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return pe(e,this.constructor.elementStyles),e}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$ES)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostConnected)===null||i===void 0?void 0:i.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$ES)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostDisconnected)===null||i===void 0?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=me){var o;let n=this.constructor._$Ep(t,i);if(n!==void 0&&i.reflect===!0){let s=(((o=i.converter)===null||o===void 0?void 0:o.toAttribute)!==void 0?i.converter:he).toAttribute(e,i.type);this._$El=t,s==null?this.removeAttribute(n):this.setAttribute(n,s),this._$El=null}}_$AK(t,e){var i;let o=this.constructor,n=o._$Ev.get(t);if(n!==void 0&&this._$El!==n){let s=o.getPropertyOptions(n),a=typeof s.converter=="function"?{fromAttribute:s.converter}:((i=s.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?s.converter:he;this._$El=n,this[n]=a.fromAttribute(e,s.type),this._$El=null}}requestUpdate(t,e,i){let o=!0;t!==void 0&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||lr)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$El!==t&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(t,i))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((o,n)=>this[n]=o),this._$Ei=void 0);let e=!1,i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(t=this._$ES)===null||t===void 0||t.forEach(o=>{var n;return(n=o.hostUpdate)===null||n===void 0?void 0:n.call(o)}),this.update(i)):this._$Ek()}catch(o){throw e=!1,this._$Ek(),o}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;(e=this._$ES)===null||e===void 0||e.forEach(i=>{var o;return(o=i.hostUpdated)===null||o===void 0?void 0:o.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){this._$EC!==void 0&&(this._$EC.forEach((e,i)=>this._$EO(i,this[i],e)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};O.finalized=!0,O.elementProperties=new Map,O.elementStyles=[],O.shadowRootOptions={mode:"open"},ar==null||ar({ReactiveElement:O}),((fe=Tt.reactiveElementVersions)!==null&&fe!==void 0?fe:Tt.reactiveElementVersions=[]).push("1.6.1");var ge,$t=window,q=$t.trustedTypes,cr=q?q.createPolicy("lit-html",{createHTML:r=>r}):void 0,I=`lit$${(Math.random()+"").slice(9)}$`,gr="?"+I,zi=`<${gr}>`,Y=document,ft=(r="")=>Y.createComment(r),mt=r=>r===null||typeof r!="object"&&typeof r!="function",yr=Array.isArray,Ni=r=>yr(r)||typeof(r==null?void 0:r[Symbol.iterator])=="function",pt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ur=/-->/g,dr=/>/g,W=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),pr=/'/g,fr=/"/g,vr=/^(?:script|style|textarea|title)$/i,_r=r=>(t,...e)=>({_$litType$:r,strings:t,values:e}),be=_r(1),ko=_r(2),j=Symbol.for("lit-noChange"),x=Symbol.for("lit-nothing"),mr=new WeakMap,Q=Y.createTreeWalker(Y,129,null,!1),Ui=(r,t)=>{let e=r.length-1,i=[],o,n=t===2?"<svg>":"",s=pt;for(let l=0;l<e;l++){let c=r[l],g,m,d=-1,v=0;for(;v<c.length&&(s.lastIndex=v,m=s.exec(c),m!==null);)v=s.lastIndex,s===pt?m[1]==="!--"?s=ur:m[1]!==void 0?s=dr:m[2]!==void 0?(vr.test(m[2])&&(o=RegExp("</"+m[2],"g")),s=W):m[3]!==void 0&&(s=W):s===W?m[0]===">"?(s=o!=null?o:pt,d=-1):m[1]===void 0?d=-2:(d=s.lastIndex-m[2].length,g=m[1],s=m[3]===void 0?W:m[3]==='"'?fr:pr):s===fr||s===pr?s=W:s===ur||s===dr?s=pt:(s=W,o=void 0);let E=s===W&&r[l+1].startsWith("/>")?" ":"";n+=s===pt?c+zi:d>=0?(i.push(g),c.slice(0,d)+"$lit$"+c.slice(d)+I+E):c+I+(d===-2?(i.push(void 0),l):E)}let a=n+(r[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return[cr!==void 0?cr.createHTML(a):a,i]},B=class{constructor({strings:t,_$litType$:e},i){let o;this.parts=[];let n=0,s=0,a=t.length-1,l=this.parts,[c,g]=Ui(t,e);if(this.el=B.createElement(c,i),Q.currentNode=this.el.content,e===2){let m=this.el.content,d=m.firstChild;d.remove(),m.append(...d.childNodes)}for(;(o=Q.nextNode())!==null&&l.length<a;){if(o.nodeType===1){if(o.hasAttributes()){let m=[];for(let d of o.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(I)){let v=g[s++];if(m.push(d),v!==void 0){let E=o.getAttribute(v.toLowerCase()+"$lit$").split(I),u=/([.?@])?(.*)/.exec(v);l.push({type:1,index:n,name:u[2],strings:E,ctor:u[1]==="."?ve:u[1]==="?"?_e:u[1]==="@"?we:J})}else l.push({type:6,index:n})}for(let d of m)o.removeAttribute(d)}if(vr.test(o.tagName)){let m=o.textContent.split(I),d=m.length-1;if(d>0){o.textContent=q?q.emptyScript:"";for(let v=0;v<d;v++)o.append(m[v],ft()),Q.nextNode(),l.push({type:2,index:++n});o.append(m[d],ft())}}}else if(o.nodeType===8)if(o.data===gr)l.push({type:2,index:n});else{let m=-1;for(;(m=o.data.indexOf(I,m+1))!==-1;)l.push({type:7,index:n}),m+=I.length-1}n++}}static createElement(t,e){let i=Y.createElement("template");return i.innerHTML=t,i}};function K(r,t,e=r,i){var o,n,s,a;if(t===j)return t;let l=i!==void 0?(o=e._$Co)===null||o===void 0?void 0:o[i]:e._$Cl,c=mt(t)?void 0:t._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((n=l==null?void 0:l._$AO)===null||n===void 0||n.call(l,!1),c===void 0?l=void 0:(l=new c(r),l._$AT(r,e,i)),i!==void 0?((s=(a=e)._$Co)!==null&&s!==void 0?s:a._$Co=[])[i]=l:e._$Cl=l),l!==void 0&&(t=K(r,l._$AS(r,t.values),l,i)),t}var ye=class{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;let{el:{content:i},parts:o}=this._$AD,n=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:Y).importNode(i,!0);Q.currentNode=n;let s=Q.nextNode(),a=0,l=0,c=o[0];for(;c!==void 0;){if(a===c.index){let g;c.type===2?g=new G(s,s.nextSibling,this,t):c.type===1?g=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(g=new xe(s,this,t)),this.u.push(g),c=o[++l]}a!==(c==null?void 0:c.index)&&(s=Q.nextNode(),a++)}return n}p(t){let e=0;for(let i of this.u)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}},G=class{constructor(t,e,i,o){var n;this.type=2,this._$AH=x,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=o,this._$Cm=(n=o==null?void 0:o.isConnected)===null||n===void 0||n}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=K(this,t,e),mt(t)?t===x||t==null||t===""?(this._$AH!==x&&this._$AR(),this._$AH=x):t!==this._$AH&&t!==j&&this.g(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):Ni(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==x&&mt(this._$AH)?this._$AA.nextSibling.data=t:this.T(Y.createTextNode(t)),this._$AH=t}$(t){var e;let{values:i,_$litType$:o}=t,n=typeof o=="number"?this._$AC(t):(o.el===void 0&&(o.el=B.createElement(o.h,this.options)),o);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===n)this._$AH.p(i);else{let s=new ye(n,this),a=s.v(this.options);s.p(i),this.T(a),this._$AH=s}}_$AC(t){let e=mr.get(t.strings);return e===void 0&&mr.set(t.strings,e=new B(t)),e}k(t){yr(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,o=0;for(let n of t)o===e.length?e.push(i=new G(this.O(ft()),this.O(ft()),this,this.options)):i=e[o],i._$AI(n),o++;o<e.length&&(this._$AR(i&&i._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,e);t&&t!==this._$AB;){let o=t.nextSibling;t.remove(),t=o}}setConnected(t){var e;this._$AM===void 0&&(this._$Cm=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}},J=class{constructor(t,e,i,o,n){this.type=1,this._$AH=x,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=x}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,o){let n=this.strings,s=!1;if(n===void 0)t=K(this,t,e,0),s=!mt(t)||t!==this._$AH&&t!==j,s&&(this._$AH=t);else{let a=t,l,c;for(t=n[0],l=0;l<n.length-1;l++)c=K(this,a[i+l],e,l),c===j&&(c=this._$AH[l]),s||(s=!mt(c)||c!==this._$AH[l]),c===x?t=x:t!==x&&(t+=(c!=null?c:"")+n[l+1]),this._$AH[l]=c}s&&!o&&this.j(t)}j(t){t===x?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}},ve=class extends J{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===x?void 0:t}},Wi=q?q.emptyScript:"",_e=class extends J{constructor(){super(...arguments),this.type=4}j(t){t&&t!==x?this.element.setAttribute(this.name,Wi):this.element.removeAttribute(this.name)}},we=class extends J{constructor(t,e,i,o,n){super(t,e,i,o,n),this.type=5}_$AI(t,e=this){var i;if((t=(i=K(this,t,e,0))!==null&&i!==void 0?i:x)===j)return;let o=this._$AH,n=t===x&&o!==x||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,s=t!==x&&(o===x||n);n&&this.element.removeEventListener(this.name,this,o),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;typeof this._$AH=="function"?this._$AH.call((i=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&i!==void 0?i:this.element,t):this._$AH.handleEvent(t)}},xe=class{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){K(this,t)}};var hr=$t.litHtmlPolyfillSupport;hr==null||hr(B,G),((ge=$t.litHtmlVersions)!==null&&ge!==void 0?ge:$t.litHtmlVersions=[]).push("2.6.1");var wr=(r,t,e)=>{var i,o;let n=(i=e==null?void 0:e.renderBefore)!==null&&i!==void 0?i:t,s=n._$litPart$;if(s===void 0){let a=(o=e==null?void 0:e.renderBefore)!==null&&o!==void 0?o:null;n._$litPart$=s=new G(t.insertBefore(ft(),a),a,void 0,e!=null?e:{})}return s._$AI(r),s};var Ee,Ae;var A=class extends O{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;let i=super.createRenderRoot();return(t=(e=this.renderOptions).renderBefore)!==null&&t!==void 0||(e.renderBefore=i.firstChild),i}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=wr(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return j}};A.finalized=!0,A._$litElement$=!0,(Ee=globalThis.litElementHydrateSupport)===null||Ee===void 0||Ee.call(globalThis,{LitElement:A});var xr=globalThis.litElementPolyfillSupport;xr==null||xr({LitElement:A});((Ae=globalThis.litElementVersions)!==null&&Ae!==void 0?Ae:globalThis.litElementVersions=[]).push("3.2.2");var ji="flz-designer-event-type",St=class extends Event{constructor(e,i,o,n,s,a){super(i,{bubbles:!0,composed:!0});this.skipWidgetsNotify=!1;this.action=o,this.payload=n,this.emitter=e,this.onSuccess=s,this.onError=a}},Pt=class extends St{constructor(t,e,i,o,n){super(t,tr,e,i,o,n)}},Lt=class extends St{constructor(t,e,i,o,n){super(t,ji,e,i,o,n)}};function S(r,t,e,i,o){r.dispatchEvent(new Pt(r,t,e,i,o))}function Ce(r,t,e,i,o){r.dispatchEvent(new Lt(r,t,e,i,o))}function Ot(r,t,e,i,o){S(r,t,e,i,o)}function Jo(r,t,e){return new Promise((i,o)=>{S(r,t,e,i,o)})}function Zo(r,t,e){return new Promise((i,o)=>{Ce(r,t,e,i,o)})}function Xo(r,t,e){let i=new CustomEvent(t,Object.assign({bubbles:!0,cancelable:!1,composed:!0,detail:{}},e));return r.dispatchEvent(i),i}function tn(r,t){return new Promise(e=>{function i(o){o.target===r&&(r.removeEventListener(t,i),e())}r.addEventListener(t,i)})}var Rt=class extends A{constructor(){super();this.setConfigOnlyOnce=!1;this._widgetId=ue()}connectedCallback(){super.connectedCallback(),S(this,"widget-connected")}willUpdate(e){super.willUpdate(e),S(this,"widget-update")}firstUpdated(e){super.firstUpdated(e),S(this,"widget-first-updated")}updated(e){super.updated(e),S(this,"widget-updated")}set config(e){this._widgetId=e.id,this._config=e,this._data=e==null?void 0:e.data,this.requestUpdate()}get config(){return this._config}set data(e){this._data=e,this.requestUpdate()}get data(){return this._data}get widgetId(){return this._widgetId}onEnterViewport(e){this.style.setProperty("--fz-animation-1-name","inherit"),this.style.setProperty("--fz-animation-1-play-state","running")}onLeaveViewport(e){}incomingEvents(e){}stateChanged(e){}};var br=r=>{class t extends r{constructor(){super(...arguments);this._isConfigSet=!1}set config(o){super.config=o,this._isConfigSet=!0}get config(){return super.config}isConfigSet(){return this._isConfigSet}shouldUpdate(o){return this._isConfigSet?super.shouldUpdate(o):!1}}return t};var k=class extends br(Rt){};var Ft=class extends k{onClose(){}onShow(){}};var Er=class extends k{};var It=class{constructor(t){this.childFloaters=[];this._addFloatChild=t=>{if(!t.detail.child)throw new Error("child is required to add to float children container");t.stopPropagation(),this.add(t.detail.child)};this.host=t,t.addController(this)}hostConnected(){this.host.addEventListener("add-float-child",this._addFloatChild)}hostDisconnected(){this.host.removeEventListener("add-float-child",this._addFloatChild),this.closeAllChildFloaters()}add(t){this.childFloaters.push(t)}remove(t){let e=this.childFloaters.indexOf(t);e>-1&&this.childFloaters.splice(e,1)}removeAndClose(t){t.close(),this.remove(t)}all(){return this.childFloaters}closeAllChildFloaters(){this.childFloaters.forEach(t=>t.close()),this.childFloaters=[]}};var kt=class extends A{constructor(){super(...arguments);this.floatChildrenContainer=new It(this)}set widget(e){this._widget=e,this.data=e.data}get widget(){return this._widget}set propertyPath(e){this._propPath=e}get propertyPath(){return this._propPath}get widgetId(){return this._widget.id}updateWidget(){this._widget.data=this._data}set data(e){this._data=e}get data(){return this._data}};var Cr=le(Xe(),1),Ar=class extends kt{set propertyPath(e){this._propPath=e}get propertyPath(){return this._propPath}firstUpdated(){this.data=(0,Cr.default)(this.widget.data,this.propertyPath)}};var Tr=class extends A{set editTag(e){this._editTag=e}get editTag(){return this._editTag}set viewTag(e){this._viewTag=e}get viewTag(){return this._viewTag}set viewTagDataProperty(e){this._viewTagDataProperty=e}get viewTagDataProperty(){return this._viewTagDataProperty}set board(e){this._board=e}get board(){return this._board}set onCancel(e){this._onCancel=e}get onCancel(){return this._onCancel}};var $r=class extends A{constructor(){super();this.zIndex=10;this.xOffset=0;this.yOffset=0;this.currentX=0;this.currentY=0;this.initialX=0;this.initialY=0;this.isDraggable=!0}resetPosition(){this.zIndex=10,this.xOffset=0,this.yOffset=0,this.currentX=0,this.currentY=0,this.initialX=0,this.initialY=0,this.setAttribute("style","")}set pos(e){e?this._pos=e:this._pos={x:0,y:0},this.currentX=this.xOffset=this.initialX=this._pos.x,this.currentY=this.yOffset=this.initialY=this._pos.y,this.moveTo(this._pos)}get pos(){return this._pos}moveTo(e){this.setAttribute("style",`transform: translate(${e.x}px, ${e.y}px); z-index: ${this.zIndex}`)}onDragStart(e){console.log(e)}onDragEnd(e){this._pos={x:Math.round(this.currentX),y:Math.round(this.currentY)},console.log("new pos",this._pos)}onDrag(e){this.setAttribute("style",`transform: translate(${this.currentX}px, ${this.currentY}px);`)}onClick(e){console.log("inner ckick",e)}refreshPos(){this.onDragEnd()}};function Sr(r,t,e,i,o){let n=0,s=0,a=0,l=0;e?r.querySelector(e).onmousedown=g:t.onmousedown=g;let c=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--edit-fz-system-control-bar-height"))||0;function g(u){u=u||window.event,u.preventDefault(),a=u.clientX,l=u.clientY,document.onmouseup=E,document.onmousemove=v}function m(u,f){let _=t.offsetTop-f,p=t.offsetLeft-u;return _<=c&&(_=c+1),(p<=0||p>=window.innerWidth-t.offsetWidth)&&(p<5?p=1:p=window.innerWidth-t.offsetWidth-1),[p,_]}function d(u,f){let _=t.getBoundingClientRect(),p=i.getBoundingClientRect(),F=t.offsetTop-f,$=t.offsetLeft-u;return F<=0?F=1:F>=p.height-_.height&&(F=i.offsetHeight-t.offsetHeight-1),($<=0||$>=p.width-_.width)&&($<5?$=1:$=i.offsetWidth-t.offsetWidth-1),[$,F]}function v(u){u=u||window.event,u.preventDefault(),n=a-u.clientX,s=l-u.clientY,a=u.clientX,l=u.clientY;let f,_;i?[f,_]=d(n,s):[f,_]=m(n,s),t.style.top=_+"px",t.style.left=f+"px",o&&(o==null?void 0:o.all().length)>0&&o.all().map(p=>{p.style.top=u.movementY+parseInt(p.style.top)+"px",p.style.left=u.movementX+parseInt(p.style.left)+"px"})}function E(){document.onmouseup=null,document.onmousemove=null}}var Bi=(r,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?U(N({},t),{finisher(e){e.createProperty(t.key,r)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(e){e.createProperty(t.key,r)}};function Vt(r){return(t,e)=>e!==void 0?((i,o,n)=>{o.constructor.createProperty(n,i)})(r,t,e):Bi(r,t)}var H=({finisher:r,descriptor:t})=>(e,i)=>{var o;if(i===void 0){let n=(o=e.originalKey)!==null&&o!==void 0?o:e.key,s=t!=null?{kind:"method",placement:"prototype",key:n,descriptor:t(e.key)}:U(N({},e),{key:n});return r!=null&&(s.finisher=function(a){r(a,n)}),s}{let n=e.constructor;t!==void 0&&Object.defineProperty(e,i,t(i)),r==null||r(n,i)}};function Pr(r,t){return H({descriptor:e=>{let i={get(){var o,n;return(n=(o=this.renderRoot)===null||o===void 0?void 0:o.querySelector(r))!==null&&n!==void 0?n:null},enumerable:!0,configurable:!0};if(t){let o=typeof e=="symbol"?Symbol():"__"+e;i.get=function(){var n,s;return this[o]===void 0&&(this[o]=(s=(n=this.renderRoot)===null||n===void 0?void 0:n.querySelector(r))!==null&&s!==void 0?s:null),this[o]}}return i}})}var Te,Wn=((Te=window.HTMLSlotElement)===null||Te===void 0?void 0:Te.prototype.assignedElements)!=null?(r,t)=>r.assignedElements(t):(r,t)=>r.assignedNodes(t).filter(e=>e.nodeType===Node.ELEMENT_NODE);var Lr=r=>{class t extends r{firstUpdated(o){super.firstUpdated(o),setTimeout(()=>{this.moveToPos(),this.style.opacity="1"})}setLayer(o){this.layer=o,this.style.zIndex=(104+o).toString()}getLayer(){return this.layer}close(o){o==null||o.stopPropagation(),this.remove()}setStartPos(o,n){this.x=o,this.y=n}checkIfYOverflow(o,n){let s=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)+window.scrollY;return o+n>s-5}getY(){return this.y+30+window.scrollY}getYWithOverflow(o){return this.y-o-30+window.scrollY}moveToPos(){if(!this.x||!this.y)return;let o=this.getBoundingClientRect(),n=o.width,s=o.height,l=document.body.getBoundingClientRect().width,c=this.x-n/2;c<5?c=5:c+n>l-5&&(c=l-n-5);let g=this.getY();this.checkIfYOverflow(g,s)&&(g=this.getYWithOverflow(s)),this.style.top=`${g}px`,this.style.left=`${c}px`}}return t.styles=[dt`
                :host {
                    --floatBoxShadow: 0.1px 1.1px 1.9px -13px rgba(0, 0, 0, 0.045),
                        0.3px 2.5px 4.7px -13px rgba(0, 0, 0, 0.065), 0.5px 4.8px 8.8px -13px rgba(0, 0, 0, 0.08),
                        0.9px 8.5px 15.6px -13px rgba(0, 0, 0, 0.095), 1.7px 15.9px 29.2px -13px rgba(0, 0, 0, 0.115),
                        4px 38px 70px -13px rgba(0, 0, 0, 0.16);

                    --floatBoxBorder: thin solid rgb(103 103 103 / 78%);
                    --outlineShadow: 1px 1px 3px #ccc;

                    //resize: both;
                    pointer-events: all;

                    opacity: 0;
                    transition: opacity 200ms ease-in;
                    position: absolute;
                    top: 100px;
                    left: 150px;
                    z-index: 104;
                    box-shadow: var(--floatBoxShadow);

                    //overflow: hidden;
                    min-width: 300px;
                    min-height: 40px;

                    overflow: visible;
                    max-width: 300px;

                    border-radius: var(--edit-fz-border-radius-small);
                    font-family: Open Sans, serif;
                }
            `],t};var Or=Lr(A),Z=class extends Or{constructor(e){super();this.isLoading=!0;this.childEl=e,this.childEl._floatingEditor=this}disconnectedCallback(){this.removeHighlight(),super.disconnectedCallback()}firstUpdated(e){this.isLoading=!1,this.body.appendChild(this.childEl),Sr(this.shadowRoot,this,"#handle",void 0,this.childEl.floatChildrenContainer),super.firstUpdated(e)}getChildEl(){return this.childEl}highlight(){this.childEl.widget&&this.childEl.widget.classList.add("highlight")}removeHighlight(){this.childEl.widget&&this.childEl.widget.classList.remove("highlight")}render(){var e;return be`
            ${this.isLoading?be`<div class="loading"></div>`:""}
            <div
                id="handle"
                style="${this.childEl._handleStyle}"
                @mouseover="${this.highlight}"
                @mouseleave="${this.removeHighlight}">
                <span class="conf-name"> ${this.title||((e=this.childEl.widget)==null?void 0:e.widgetTitle)||""} </span>
                <div class="close" @click=${this.close}>
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        height="24px"
                        viewBox="0 0 24 24"
                        width="24px"
                        fill="#ffffff">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" />
                    </svg>
                </div>
            </div>
            <div id="body"></div>
        `}};Z.styles=[Or.styles,dt`
            :host {
            }

            .close {
                cursor: pointer;
                color: var(--edit-fz-color-neutral-0);
                border: none;
                background: none;
                display: flex;
                align-items: center;

                &:hover {
                    color: black;
                }
            }

            .save {
                position: absolute;
                right: 60px;
                font-size: 14px;
                cursor: pointer;
                color: var(--edit-fz-color-neutral-0);
                border: none;
                background: none;
            }

            .save[disabled] {
                cursor: default;
                color: gray;
            }

            #handle {
                background-color: var(--edit-fz-color-primary-3);
                border-radius: var(--edit-fz-border-radius-small) var(--edit-fz-border-radius-small) 0 0;
                height: 30px;
                display: flex;
                align-items: center;
                padding: var(--edit-fz-spacing-4x-small) var(--edit-fz-spacing-small);
                justify-content: space-between;

                white-space: nowrap;

                font-family: Open Sans, serif;
                font-size: 14px;
                font-style: normal;
                /*font-weight: 600;*/
                line-height: 21px;
                letter-spacing: 0;
                text-align: left;
                color: var(--edit-fz-color-neutral-0);
                cursor: grab;
            }

            #handle:active {
                cursor: grabbing;
            }

            #body {
                padding: var(--edit-fz-spacing-small);
                background-color: var(--edit-fz-color-neutral-0);
                border-radius: 0 0 var(--edit-fz-border-radius-small) var(--edit-fz-border-radius-small);
                max-height: 540px;
                overflow: auto;
            }
            .loading {
                width: 100%;
                height: calc(100% - 2em);
                background: var(--loading-bg-color, rgba(0, 0, 0, 0.4));
                /* min-height: 100px; */
                position: absolute;
                z-index: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .loading::after {
                content: "autorenew";
                font-family: "Material Icons", sans-serif;
                font-size: 40px;
                text-shadow: 0 0 14px #fff, 0 0 14px #fff, 0 0 20px #fff;
                animation: rotating 2s ease-in-out infinite;
            }
            @keyframes rotating {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }
            .btn {
                margin: 0 1em;
                width: 10%;
                text-align: center;
            }

            input,
            select {
                background: transparent;
                border: none;
                color: var(--edit-fz-color-neutral-0);
                outline: none;
                padding: 0.6em;
                margin: 0.4em;
                width: 40%;
            }

            input:focus {
                outline: none;
            }
        `],wt([Pr("#body")],Z.prototype,"body",2),wt([Vt()],Z.prototype,"isLoading",2),wt([Vt()],Z.prototype,"title",2);function Rr(r){return{top:"0%",bottom:"-100%",start:"0%",middle:"-50%",end:"-100%"}[r]}function Es(r){var n,s;let t="absolute";r.floatPos.isFixedToViewPort&&(t="fixed");let e=`position: ${t};`;if(r.floatPos.pos.top!==void 0){let a=r.floatPos.pos.top;typeof a=="number"&&(a=a+"px"),t==="fixed"&&a.startsWith("0")?e+=`top: calc(${a} + var(--edit-fz-system-control-bar-height, 0px));`:e+=`top: ${a};`}if(r.floatPos.pos.right!==void 0){let a=r.floatPos.pos.right;typeof a=="number"&&(a=a+"px"),e+=`right: ${a};`}if(r.floatPos.pos.bottom!==void 0){let a=r.floatPos.pos.bottom;typeof a=="number"&&(a=a+"px"),e+=`bottom: ${a};`}if(r.floatPos.pos.left!==void 0){let a=r.floatPos.pos.left;typeof a=="number"&&(a=a+"px"),e+=`left: ${a};`}if(r.floatPos.padding!==void 0){let a=r.floatPos.padding.top||"0",l=r.floatPos.padding.right||"0",c=r.floatPos.padding.bottom||"0",g=r.floatPos.padding.left||"0";e+=`padding: ${a} ${l} ${c} ${g};`}let i=((n=r.floatPos.originPoint)==null?void 0:n[0])||"0",o=((s=r.floatPos.originPoint)==null?void 0:s[1])||"0";return e+=`transform: translate(${Rr(i)}, ${Rr(o)});`,e}function Gi(r){return`${r.rowStart} / ${r.colStart} / ${r.rowEnd} / ${r.colEnd}`}function As(r){let t="";if(r!=null&&r.hasOwnProperty("rowStart"))return r.hasOwnProperty("layer")&&(t+=`z-index: ${r.layer};`),r.hasOwnProperty("minHeight")&&(t+=`min-height: ${r.minHeight};`),r.hasOwnProperty("padding")&&(t+=`--fz-tmp-padd-top: ${r.padding[0]};
                --fz-tmp-padd-right: ${r.padding[1]};
                --fz-tmp-padd-bottom: ${r.padding[2]};
                --fz-tmp-padd-left: ${r.padding[3]};`),t+="grid-area: "+Gi(r),t}var y=class{constructor(t){this.values=[],this.delimiter=":",this.hasValue(t)&&this.addValue(t)}toString(){return this.values.join(this.delimiter)}hasValue(t){return typeof t!="undefined"&&t!==null&&t!==""}addValue(t){return Array.isArray(t)?this.values=this.values.concat(t):this.values.push(t),this.values=this.values.filter(e=>this.hasValue(e)),this}setDelimiter(t){return this.delimiter=t,this}};var $e=class extends Error{constructor(t="Unsupported"){super(t)}};function X(r){return new $e(r)}function Fr(){return this._qualifierModel||{error:X(`unsupported qualifier ${this.constructor.name}`)}}var Mt=class{constructor(){this._qualifierModel={}}toJson(){return Fr.apply(this)}};var h=class extends Mt{constructor(t,e){super(),this.delimiter="_",this.key=t,e instanceof y?this.qualifierValue=e:(this.qualifierValue=new y,this.qualifierValue.addValue(e))}toString(){let{key:t,delimiter:e,qualifierValue:i}=this;return`${t}${e}${i.toString()}`}addValue(t){return this.qualifierValue.addValue(t),this}};var w=class extends h{constructor(t,e){let i;e?i=new y([t,`${e}`]).setDelimiter(":"):i=t,super("fl",i),this.flagValue=e}toString(){return super.toString().replace(/\./,"%2E")}getFlagValue(){return this.flagValue}};function Ir(r,t){let e=Array.from(r.entries());return t.forEach(i=>{e.push(["fl",i])}),e.sort().map(i=>i[1])}function kr(){return this._actionModel&&Object.keys(this._actionModel).length?this._actionModel:{error:X(`unsupported action ${this.constructor.name}`)}}var Dt=class{constructor(){this._actionModel={}}toJson(){return kr.apply(this)}};var C=class extends Dt{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(t){return this.actionTag=t,this}toString(){return this.prepareQualifiers(),Ir(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(t){if(typeof t=="string"){let[e,i]=t.toLowerCase().split("_");e==="fl"?this.flags.push(new w(i)):this.qualifiers.set(e,new h(e,i))}else this.qualifiers.set(t.key,t);return this}addFlag(t){return typeof t=="string"?this.flags.push(new w(t)):t instanceof w&&this.flags.push(t),this}addValueToQualifier(t,e){return this.qualifiers.get(t).addValue(e),this}};function Se(r){let t=r.toString();return t.match(/[A-Z]/gi)||t.length>1&&t[0]==="0"?t:!isNaN(parseFloat(t))&&t.indexOf(":")===-1&&t.indexOf(".")===-1?`${t}.0`:t}var zt=class extends y{};function Vr(){return new w("ignore_aspect_ratio")}function Mr(){return new w("lossy")}function Dr(){return new w("preserve_transparency")}function zr(r){return new w("progressive",r)}function Nr(){return new w("region_relative")}function Ur(){return new w("relative")}function V(r){let t={};return Object.keys(r).forEach(e=>{t[r[e]]=e}),t}var Pe={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad"},Hi={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},Le={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent"},Qi={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},qi={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},Yi={444:"CHROMA_444",420:"CHROMA_420"},Ki={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"};var ea=V(Yi),ra=V(Ki),Wr=V(Pe),jr=V(Hi),Nt=V(Le),ia=V(Qi),oa=V(qi);var tt=class extends C{constructor(t,e,i){super(),this._actionModel={dimensions:{}},this._actionModel.actionType=Wr[t]||t,this.addQualifier(new h("c",t)),e&&this.width(e),i&&this.height(i)}height(t){return this._actionModel.dimensions.height=t,this.addQualifier(new h("h",t))}width(t){return this._actionModel.dimensions.width=t,this.addQualifier(new h("w",t))}aspectRatio(t){if(t instanceof zt)return this._actionModel.dimensions.aspectRatio=`${t}`,this.addQualifier(new h("ar",t));if(typeof t=="number"||typeof t=="string")return this._actionModel.dimensions.aspectRatio=Se(t),this.addQualifier(new h("ar",Se(t)));if(t instanceof w)return this._actionModel.dimensions.aspectRatio=`${t.qualifierValue}`,this.addFlag(t)}relative(){return this._actionModel.relative=!0,this.addFlag(Ur())}regionRelative(){return this._actionModel.regionRelative=!0,this.addFlag(Nr())}static fromJson(t){let{actionType:e,dimensions:i,relative:o,regionRelative:n}=t,{aspectRatio:s,width:a,height:l}=i,c=Pe[e]||e,g=new this(c,a,l);return s&&g.aspectRatio(s==="ignore_aspect_ratio"?Vr():s),o&&g.relative(),n&&g.regionRelative(),g}};var M=class extends h{constructor(t){super("g",new y(t))}};var et=class extends M{constructor(){super("auto")}autoFocus(...t){return this.addValue(t),this}};var rt=class extends M{constructor(t){super(t)}fallbackGravity(t){return this.addValue(t.qualifierValue),this}};var Ut=class extends M{constructor(t){super(t)}};function Oe(...r){let t=[...r];return new rt(t)}function Wt(){return new et}var R=class extends y{constructor(t){super(),this.name=t}toString(){return this.name}};function Br(){return new R("ocr_text")}function Ji(r){return r&&`${r}`.split(":")[0]==="auto"}function Zi(r){let t=Re(r);return["north","center","east","west","south","north_west","south_east","south_west","north_east"].includes(t)}function Re(r){return`${r}`.replace("g_","")}function Xi(r){return{compass:Re(r),gravityType:"direction"}}function to(r){return Re(r)==="ocr_text"}function eo(){return{gravityType:"ocr"}}function ro(r){return`${r.qualifierValue}`.split(":")[0]==="auto"}function io(r){let e=r.toString().split("_"),i={object:e[0]};return e.length>1&&(e[1]==="avoid"?i.avoid=!0:i.weight=+e[1]),i}function Gr(r){let t,e=r==="auto"?new et:r;`${r}`.startsWith("auto:")?t=`${r}`.split(":").filter(o=>o!=="auto"):t=e.qualifierValue.values.filter(o=>o!=="auto");let i=t.map(io);return{gravityType:"auto",autoFocus:i}}function oo(r){let t=`${r}`.split(":").includes("auto"),e=r.qualifierValue.values,i=t?e.slice(0,e.length-1):e,o={gravityType:"object",focusOnObjects:i.map(n=>`${n}`)};if(t){let n=e[e.length-1].values.slice(1),s=Wt().autoFocus(...n);o.fallbackGravity=Gr(s)}return o}function no(r){let e=r.split(":").map(i=>new R(i));return new rt(e)}function Hr(r){return Zi(r)?Xi(r):to(r)?eo():Ji(r)||ro(r)?Gr(r):oo(typeof r=="string"?no(r):r)}var it=class extends y{constructor(t,e){super(),this._weight=e,this.focusOn=t,this.shouldAvoid=!1}static focusOn(t,e){return new it(t,e)}shouldAddWeight(){return typeof this._weight=="number"||typeof this._weight=="string"||this.shouldAvoid}getName(){return this.focusOn.name}getWeight(){return this.shouldAvoid?"avoid":this._weight}toString(){return this.shouldAddWeight()?`${this.getName()}_${this.getWeight()}`:`${this.getName()}`}weight(t){return this._weight=t,this}avoid(){return this.shouldAvoid=!0,this}};var jt=class extends y{constructor(t){super(),this.val=t}toString(){return this.val}};function so(r){return r.gravityType==="direction"}function ao(r){return r.gravityType==="ocr"}function lo(r){return r.gravityType==="auto"}function co(r){let{object:t,weight:e,avoid:i}=r,o=new it(new R(t));return(e||e===0)&&o.weight(e),i&&o.avoid(),o}function Qr(r){let e=(r.autoFocus||[]).map(co);return Wt().autoFocus(...e)}function uo(r){let t=(r.focusOnObjects||[]).map(i=>new R(i)),e=Oe(...t);if(r.fallbackGravity){let i=Qr(r.fallbackGravity);e.fallbackGravity(i)}return e}function qr(r){return so(r)?new Ut(new jt(r.compass)):ao(r)?Oe(Br()):lo(r)?Qr(r):uo(r)}var ot=class extends tt{gravity(t){this._actionModel.gravity=Hr(t);let e=typeof t=="string"?new h("g",t):t;return this.addQualifier(e)}static fromJson(t){let e=super.fromJson.apply(this,[t]);return t.gravity&&e.gravity(qr(t.gravity)),e}};function Bt(r){return r&&(r.match(/^#/)?`rgb:${r.substr(1)}`:r)}var ht=class extends y{constructor(t){super(),this.val=t}toString(){return this.val}};function Fe(){return new ht("vflip")}function Ie(){return new ht("hflip")}var Gt=class extends y{constructor(t){super(t),this.val=t}getValue(){return this.val}};var Ht=class extends ot{x(t){return this._actionModel.x=t,this.addQualifier(new h("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new h("y",t))}zoom(t){return this._actionModel.zoom=t,this.addQualifier(new h("z",t))}static fromJson(t){let e=super.fromJson.apply(this,[t]);return t.x&&e.x(t.x),t.y&&e.y(t.y),t.zoom&&e.zoom(t.zoom),e}};var Qt=class extends ot{x(t){return this._actionModel.x=t,this.addQualifier(new h("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new h("y",t))}static fromJson(t){let e=super.fromJson.apply(this,[t]);return t.x&&e.x(t.x),t.y&&e.y(t.y),e}};var qt=class extends Qt{};function ke(r,t){return new Ht("crop",r,t)}function Ve(r,t){return new tt("fit",r,t)}function Me(r,t){return new qt("lfill",r,t)}var De=class extends C{constructor(){super(),this._actionModel={},this._actionModel.actionType="roundCorners"}radius(t,e,i,o){let n=new y;t!==void 0&&n.addValue(t),e!==void 0&&n.addValue(e),i!==void 0&&n.addValue(i),o!==void 0&&n.addValue(o);let s=[t,e,i,o].filter(a=>a!==void 0);return this._radius=s,this._actionModel.radius=s,this.addQualifier(new h("r").addValue(n)),this}max(){return this._radius="max",this._actionModel.radius="max",this.addQualifier(new h("r","max"))}getRadius(){return this._radius}static fromJson(t){let{radius:e}=t,i=new this;return Array.isArray(e)&&i.radius(e[0],e[1],e[2],e[3]),e==="max"&&i.max(),i}},Yr=De;function ze(){return new Yr().max()}var nt=class extends C{constructor(t,e){super(),this._actionModel={},this._actionModel.actionType=Nt[t]||t;let i=this.createEffectQualifier(t,e);this.addQualifier(i)}createEffectQualifier(t,e){let i;return e?i=new y([t,`${e}`]).setDelimiter(":"):i=new y(t),new h("e",i)}static fromJson(t){let{actionType:e,level:i,strength:o}=t,n=Le[e]||e;return new this(n,i||o)}};var st=class extends nt{constructor(t,e){super(t,e),this.LEVEL_NAME="level",this._actionModel={},this.effectType=t,this._actionModel.actionType=Nt[t]||t,e&&this.setLevel(e)}setLevel(t){this._actionModel[this.LEVEL_NAME]=t;let e=this.createEffectQualifier(this.effectType,t);return this.addQualifier(e),this}};var Yt=class extends st{level(t){return this._actionModel.level=t,this.setLevel(t)}};var Kt=class extends Yt{color(t){return this._actionModel.color=t,this.addQualifier(new h("co",new y(Bt(t))))}static fromJson(t){let{actionType:e,level:i,color:o}=t,n=new this(e,i);return o&&n.color(o),n}};var Jt=class extends st{constructor(){super(...arguments),this.LEVEL_NAME="strength"}strength(t){return this.setLevel(t)}};function Ne(r){return new Kt("colorize",r)}function Ue(r){return new nt("art",r)}var We="a",je=class extends C{constructor(t){super(),this._actionModel={},this.addQualifier(new h(We,t)),this._actionModel.actionType="rotateByAngle",t&&(this._actionModel.angle=t)}mode(t){return this.addValueToQualifier(We,t)}angle(t){return this._actionModel.angle=t,this.addValueToQualifier(We,t)}static fromJson(t){let{angle:e}=t;return new this(e)}},Kr=je;function Zt(r){return new Kr().mode(r)}function Be(r){return new Jt("sharpen",r)}var Xt=class extends C{constructor(t,e,i){super(),this._actionModel={};let o;e instanceof Gt?o=e.getValue():o=e,this._actionModel.actionType=jr[t],this._actionModel[i]=o,this.addQualifier(new h(t,e))}};var te=class extends w{constructor(t){super("progressive",t)}};var D=class extends Xt{constructor(t,e){super(t,e,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(Mr()),this}progressive(t){return t instanceof te?(this._actionModel.progressive={mode:t.getFlagValue()},this.addFlag(t)):(this._actionModel.progressive={mode:t},this.addFlag(zr(t))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(Dr()),this}static fromJson(t){let{formatType:e,lossy:i,progressive:o,preserveTransparency:n}=t,s;return e?s=new this("f",e):s=new this("f"),o&&(o.mode?s.progressive(o.mode):s.progressive()),i&&s.lossy(),n&&s.preserveTransparency(),s}};var ee=class extends C{constructor(t){super(),this.addQualifier(new h("b",new y(t).setDelimiter("_")))}};var gt=class{constructor(t){this.raw=t}toString(){return this.raw}toJson(){return{error:X(`unsupported action ${this.constructor.name}`)}}};function Jr(r){let t=r;return"error"in t&&!!t.error}var z=class{constructor(){this.actions=[]}addAction(t){let e;if(typeof t=="string"){if(t.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";e=new gt(t)}else e=t;return this.actions.push(e),this}addTransformation(t){return t instanceof z?this.actions=this.actions.concat(t.actions):this.actions.push(new gt(t)),this}toString(){return this.actions.map(t=>t.toString()).filter(t=>t).join("/")}animated(t){return this.addAction(t)}border(t){return this.addAction(t)}reshape(t){return this.addAction(t)}resize(t){return this.addAction(t)}quality(t){return this.addAction(new D("q",t)),this}format(t){return this.addAction(new D("f",t)),this}roundCorners(t){return this.addAction(t)}overlay(t){return this.addAction(t)}underlay(t){return t.setLayerType("u"),this.addAction(t)}addVariable(t){return this.addAction(t)}conditional(t){return this.addAction(t)}effect(t){return this.addAction(t)}adjust(t){return this.addAction(t)}rotate(t){return this.addAction(t)}namedTransformation(t){return this.addAction(t)}delivery(t){return this.addAction(t)}backgroundColor(t){return this.addAction(new ee(Bt(t)))}psdTools(t){return this.addAction(t)}extract(t){return this.addAction(t)}addFlag(t){let e=new C,i=t;return typeof t=="string"&&(i=new w(t)),e.addQualifier(i),this.addAction(e)}customFunction(t){return this.addAction(t)}transcode(t){return this.addAction(t)}videoEdit(t){return this.addAction(t)}toJson(){let t=[];for(let e of this.actions){let i=e.toJson();if(Jr(i))return i;t.push(i)}return{actions:t}}};function po(r){return!(typeof r!="object"||r instanceof Array)}var Ge=class{filterOutNonSupportedKeys(t,e){let i=Object.create({});return po(t)?(Object.keys(t).forEach(o=>{e.indexOf(o)>=0?i[o]=t[o]:console.warn("Warning - unsupported key provided to configuration: ",o)}),i):Object.create({})}},Zr=Ge;var He=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics"];var yt=class extends Zr{constructor(t){super();let e=this.filterOutNonSupportedKeys(t,He);Object.assign(this,{secure:!0},e)}extend(t){let e=this.filterOutNonSupportedKeys(t,He);return new yt(Object.assign({},this,e))}setCname(t){return this.cname=t,this}setSecureDistribution(t){return this.secureDistribution=t,this}setPrivateCdn(t){return this.privateCdn=t,this}setSignUrl(t){return this.signUrl=t,this}setLongUrlSignature(t){return this.longUrlSignature=t,this}setShorten(t){return this.shorten=t,this}setUseRootPath(t){return this.useRootPath=t,this}setSecure(t){return this.secure=t,this}setForceVersion(t){return this.forceVersion=t,this}},Xr=yt;var re=class extends z{};var at=class extends z{};function ti(r){return r.match(/^https?:\//)}function ei(r){return r.indexOf("/")<0}function ri(r){return r.match(/^v[0-9]+/)}function ii(r,t){let e=t.secure,i=t.privateCdn,o=t.cname,n=t.secureDistribution;return!e&&!o?`http://res.cloudinary.com/${r}`:e&&!n&&i?`https://${r}-res.cloudinary.com`:e&&!n?`https://res.cloudinary.com/${r}`:e&&n&&i?`https://${n}`:e&&n?`https://${n}/${r}`:!e&&o?`http://${o}/${r}`:"ERROR"}function oi(r){return r||"image"}function ni(r){return r||"upload"}function si(r,t,e){let i=e!==!1;return t?`v${t}`:ri(r)||ti(r)||ei(r)?"":i?"v1":""}function lt(r,t,e){let i=t>>0,o=String(typeof e!="undefined"?e:" ");return r.length>i?String(r):(i=i-r.length,i>o.length&&(o+=fo(o,i/o.length)),o.slice(0,i)+String(r))}function fo(r,t){let e=t,i="";for(;e>0;)i+=r,e--;return i}var mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qe={},ai=0;mo.split("").forEach(r=>{let t=ai.toString(2);t=lt(t,6,"0"),Qe[t]=r,ai++});function li(r){if(r.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return r.split(".").reverse().map(t=>{let e=+t;if(isNaN(e)||e<0)throw"Invalid version number provided";return lt(t,2,"0")}).join(".")}function qe(r){let t="",i=r.split(".").length*6,o=li(r),s=parseInt(o.split(".").join("")).toString(2);if(s=lt(s,i,"0"),s.length%6!==0)throw"Version must be smaller than 43.21.26)";return s.match(/.{1,6}/g).forEach(a=>{t+=Qe[a]}),t}function ci(r){let t={sdkSemver:r.sdkSemver,techVersion:r.techVersion,sdkCode:r.sdkCode,feature:"0"};return r.accessibility&&(t.feature="D"),r.lazyload&&(t.feature="C"),r.responsive&&(t.feature="A"),r.placeholder&&(t.feature="B"),t}var ui="1.9.1";function ho(){let r="0.0.0";if(typeof window!="undefined")return r;try{return process.versions.node||r}catch(t){return r}}function go(r){let t={techVersion:ho(),sdkCode:"T",sdkSemver:ui.split("-")[0],responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return r?Object.assign(Object.assign({},t),r):t}function di(r){let t=go(r),e=ci(t);try{let i=yo(e.techVersion),o=qe(e.sdkSemver),n=qe(i),s=e.feature;return`A${e.sdkCode}${o}${n}${s}`}catch(i){return"E"}}function yo(r){let t=r.split(".");return`${t[0]}.${t[1]}`}var pi={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"},ie=class{constructor(t,e={},i){this.setPublicID(t),this.setCloudConfig(e),this.setURLConfig(i)}setURLConfig(t){return this.urlConfig=new Xr(t),this}setCloudConfig(t){return this.cloudName=t.cloudName,this.apiKey=t.apiKey,this.apiSecret=t.apiSecret,this.authToken=t.authToken,this}setPublicID(t){return this.publicID=t?t.toString():"",this}setDeliveryType(t){return this.deliveryType=t,this}setSuffix(t){return this.suffix=t,this}setSignature(t){return this.signature=t,this}setVersion(t){return t&&(this.version=t),this}setAssetType(t){return t&&(this.assetType=t),this}sign(){return this}toURL(t={}){return this.createCloudinaryURL(null,t.trackedAnalytics)}validateAssetForURLCreation(){if(typeof this.cloudName=="undefined")throw"You must supply a cloudName when initializing the asset";let t=this.suffix&&this.suffix.indexOf(".")>=0,e=this.suffix&&this.suffix.indexOf("/")>=0;if(t||e)throw"`suffix`` should not include . or /"}getResourceType(){let t=oi(this.assetType),e=ni(this.deliveryType),i=!!this.suffix,o=`${t}/${e}`,n=pi[`${t}/${e}`],s=this.urlConfig.useRootPath,a=this.urlConfig.shorten;if(s){if(o==="image/upload")return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${o} instead`)}if(a&&o==="image/upload")return"iu";if(i){if(n)return n;throw new Error(`URL Suffix only supported for ${Object.keys(pi).join(", ")}, Provided: ${o} instead`)}return o}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(t,e){if(!this.publicID)return"";this.validateAssetForURLCreation();let i=ii(this.cloudName,this.urlConfig),o=t?t.toString():"",n=si(this.publicID,this.version,this.urlConfig.forceVersion),s=this.publicID.replace(/,/g,"%2C"),a=[i,this.getResourceType(),this.getSignature(),o,n,s,this.suffix].filter(l=>l).join("/");if(typeof t=="string")return a;{let l=encodeURI(a).replace(/\?/g,"%3F").replace(/=/g,"%3D");return this.urlConfig.analytics!==!1&&!s.includes("?")?`${l}?_a=${di(e)}`:l}}};var ct=class extends ie{constructor(t,e,i,o){super(t,e,i),this.transformation=o}animated(t){return this.transformation.animated(t),this}border(t){return this.transformation.border(t),this}reshape(t){return this.transformation.reshape(t),this}resize(t){return this.transformation.resize(t),this}quality(t){return this.addAction(new D("q",t)),this}format(t){return this.addAction(new D("f",t)),this}roundCorners(t){return this.transformation.roundCorners(t),this}overlay(t){return this.transformation.overlay(t),this}addVariable(t){return this.transformation.addVariable(t),this}conditional(t){return this.transformation.conditional(t),this}effect(t){return this.transformation.effect(t),this}adjust(t){return this.transformation.adjust(t),this}rotate(t){return this.transformation.rotate(t),this}namedTransformation(t){return this.transformation.namedTransformation(t),this}delivery(t){return this.transformation.delivery(t),this}backgroundColor(t){return this.transformation.backgroundColor(t),this}psdTools(t){return this.transformation.psdTools(t),this}extract(t){return this.transformation.extract(t),this}addFlag(t){return this.transformation.addFlag(t),this}customFunction(t){return this.transformation.customFunction(t),this}addAction(t){return this.transformation.addAction(t),this}addTransformation(t){return this.transformation.addTransformation(t),this}toString(){return this.transformation.toString()}underlay(t){return this.transformation.underlay(t),this}toURL(t={}){return this.createCloudinaryURL(this.transformation,t==null?void 0:t.trackedAnalytics)}};var oe=class extends ct{constructor(t,e,i){super(t,e,i,new re)}};var ne=class extends ct{constructor(t,e,i){super(t,e,i,new at),this.assetType="video"}transcode(t){return this.transformation.transcode(t),this}videoEdit(t){return this.transformation.videoEdit(t),this}};var vt=class{constructor(t){t&&(this.cloudinaryConfig=t)}image(t){return new oe(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(t){return new ne(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(t){return this.cloudinaryConfig=t,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}};var fi=["mov","mp4","webm"],Ye=class{constructor(t){this.image=t}optimize(){return this.isOptimized=!0,this}sharpen(){return this.sharp=!0,this}maxWidth(t){return this._maxWidth=t,this}maxHeight(t){return this._maxHeight=t,this}toString(){var o,n,s,a,l,c;if(typeof this.image=="string"&&(this.image={bankCategory:"banners",url:this.image}),this.image.optimized_url&&!this.isOptimized)return this.image.optimized_url;if(!P.isCloudinaryImage(this.image.url))return this.image.url;let t=P.getImage(this.image),e=t.toURL().endsWith(".svg");if(this.sharp&&t.adjust(Be()),(o=this.image.transformation)!=null&&o.flipY&&t.rotate(Zt(Fe())),(n=this.image.transformation)!=null&&n.flipX&&t.rotate(Zt(Ie())),(s=this.image.transformation)!=null&&s.crop){let{x:g,y:m,width:d,height:v,aspect:E,radius:u}=this.image.transformation.crop,f=ke();if(d&&f.width(d),v&&f.height(v),g&&f.x(g),m&&f.y(m),E&&f.aspectRatio(E),t.resize(f),u=="max"&&t.roundCorners(ze()),e&&(d||v)){let _=Ve();this._maxWidth&&_.width(this._maxWidth),this._maxHeight&&_.height(this._maxHeight),t.resize(_),t.format("auto").quality("auto")}}if(this._maxWidth||this._maxHeight){let g=Me();this._maxWidth&&g.width(this._maxWidth),this._maxHeight&&g.height(this._maxHeight),t.resize(g)}if((a=this.image.transformation)!=null&&a.artisticFilter&&t.effect(Ue(this.image.transformation.artisticFilter)),(c=(l=this.image.transformation)==null?void 0:l.tint)!=null&&c.color){let g="#"+this.image.transformation.tint.color.substring(1);t.effect(Ne(this.image.transformation.tint.alpha).color(g))}e||t.format("auto").quality("auto");let i=t.toURL();return i=P.prepareCloudinaryUrl(i,this.image.url),i}},T=class{static getImage(t){let e=T.getPublicId(t.url);return this.cloudinary.image(e)}static getVideo(t){let e=T.getPublicId(t.url);return this.cloudinary.video(e)}getTransformedUrl(t,e,i,o=!1){let n=new Ye(t);return e&&n.maxWidth(e),i&&n.maxHeight(i),o&&n.optimize(),n.toString()}static isCloudinaryFetchUrl(t){return T.cloudinaryFetchUrlRegex.test(t)}static prepareCloudinaryUrl(t,e){if(this.cloudinaryFetchUrlRegex.test(e)){t=t.replace("/upload/","/fetch/");let i="";try{let o=e.split(this.cloudinaryFetchUrlRegex).pop(),n=new URL(o);i=encodeURIComponent(decodeURIComponent(n.search))}catch(o){console.error(o)}t=t.concat(i)}return t}static getPublicId(t){return t.replace(T.cloudinaryUrlRegex,"").split("?")[0]}loadVideoPlayerScript(){return new Promise((t,e)=>{if(document.querySelector(`script[src="${T.videoPlayerScriptUrl}"]`))t();else{let i=document.createElement("script");i.src=T.videoPlayerScriptUrl,i.onload=()=>{t()},i.onerror=o=>{e(o)},document.head.appendChild(i)}})}createVideoPlayer(t,e,i,o){let n=cloudinary.videoPlayer(e,U(N({},i),{showLogo:!1})),s=t.split(".").pop(),a=fi.includes(s)?t:t.replace(s,"mp4");return n.source(a,{sourceTypes:fi,transformation:o}),n}getVideoPlayer(t,e,i={},o={}){return this.loadVideoPlayerScript().then(()=>this.createVideoPlayer(t,e,i,o))}getOptimizedVideoUrl(t,e){let o={"0% 0%":"north_west","50% 0%":"north","100% 0%":"north_east","0% 50%":"west","50% 50%":"center","100% 50%":"east","0% 100%":"south_west","50% 100%":"south","100% 100%":"south_east"}[e],n=t.split("/upload/"),s="q_auto",a=`c_fill,g_${o},h_688,w_1432`;return n[0]+`/upload/${s}/${a}/`+n[1]}getVideoThumbnail(t){return t.substr(0,t.lastIndexOf("."))+".jpg"}static isCloudinaryImage(t){return T.cloudinaryUrlRegex.test(t)}},P=T;P.flzImagesDomain="images.folloze.com",P.cloudinaryImagesDomain="res.cloudinary.com/folloze",P.cloudinaryUrlRegex=new RegExp(`(?:((http|https):)?)//(${T.flzImagesDomain}|${T.cloudinaryImagesDomain})/(image|video).(fetch|upload)/`),P.cloudinaryFetchUrlRegex=new RegExp(`(?:((http|https):)?)//(${T.flzImagesDomain}|${T.cloudinaryImagesDomain})/(image|video).(fetch)/`),P.cloudinary=new vt({cloud:{cloudName:"folloze"},url:{secureDistribution:T.flzImagesDomain,cname:T.flzImagesDomain,secure:!0,privateCdn:!0,analytics:!1}}),P.videoPlayerScriptUrl="https://cdn.folloze.com/flz/vendors/cld-video-player.light.1.9.0.min.js";var mi=class{static isBackgroundString(t){return!!(t&&typeof t=="string")}static isBackgroundImage(t){return!!(t&&typeof t=="object"&&(t==null?void 0:t.image))}static isBackgroundVideo(t){return!!(t&&typeof t=="object"&&(t==null?void 0:t.video))}};var se=le(Xe(),1),ae=le(Fi(),1);function lp(r,t){if(!(r&&Array.isArray(r.rules)))return null;let e="",i=0,o=0,n=r.rules.map((d,v)=>{let E;if(!d.property)throw E=new Error(`Property not specified for rule ${v}`),E.rule=d,E;let u=(0,se.default)(t,d.property);if(d.property.includes("[]")){let[$,_t]=d.property.split("[]");_t=_t.substring(1),u=(0,se.default)(t,$).map(Ze=>_t?(0,se.default)(Ze,_t):Ze)}let f=d.value;typeof r.transformValueFn=="function"&&(f=r.transformValueFn(f,t,d.property));let _=null;typeof u=="boolean"&&(typeof f=="string"||f instanceof String)&&(f.toLowerCase()==="false"&&(_=!1),f.toLowerCase()==="true"&&(_=!0));let p;switch(d.op){case"eq":p=u==f,_!==null&&(p=p||u==_);break;case"ne":case"neq":p=u!=f,_!==null&&(p=p&&u!=_);break;case"gt":p=u>f;break;case"gte":p=u>=f;break;case"lt":p=u<f;break;case"lte":p=u<=f;break;case"startsWith":p=(0,ae.default)(u).startsWith(f);break;case"endsWith":p=(0,ae.default)(u).endsWith(f);break;case"contains":p=(0,ae.default)(u).includes(f);break;case"present":p=!!u;break;case"empty":case"absent":p=!u;break;case"all":p=Array.isArray(u)&&!u.find($=>$!==f);break;case"some":p=Array.isArray(u)&&u.includes(f);break;case"none":p=(Array.isArray(u)||u===null||typeof u=="undefined")&&!(u||[]).includes(f);break;case"crosses":{if(console.log(typeof r.previousValueFn),typeof r.previousValueFn!="function")throw new Error('Comparison "crosses" selected, but no function supplied to return previous value');let $=r.previousValueFn(t,d.property);p=f>$&&f<=u,e=`(${v}) ${d.property} was ${$} and became ${u}. crossed ${f}? ${p}
`;break}default:throw E=new Error(`Unknown comparison for rule (${d.op})`),E.rule=d,E}p&&(d.required?i+=1:o+=1);let F=["absent","present"].includes(d.op);return e+=`(${v}) ${d.property} (${u}) ${F?"is":""} ${d.op} ${F?"":f}? ${p}
`,p}),s=r.rules.reduce((d,v)=>d+(v.required?1:0),0),a=r.rules.length-s,l=r.satisfy||"ANY",c=!s||s===i,g=!a||(l==="ALL"?o===a:o>0),m=g&&c;return a>0&&(e+=`Passed ${o} / ${a} (need ${l}, ${g?"pass":"fail"})
`),s>0&&(e+=`Passed ${i} / ${s} required conditions (${c?"pass":"fail"})
`),e+=`Result: ${m?"PASS":"FAIL"}`,r.log&&r.log(e,n),m}function vo(r,t){var i;let e=r.getRootNode();(i=e.querySelector(`slot[name=${t}]`))==null||i.remove(),e!==document&&e&&hi(e)&&vo(e.host,t)}function up(r,t,e){gi(r,t,e,[])}var hi=r=>r.host&&r.mode=="open",gi=(r,t,e,i=[])=>{var n;r.shadowRoot&&i.push(r);let o=r.getRootNode();if(o===document){for(let[s,a]of i.entries()){let l=document.createElement("slot");s!==0&&l.setAttribute("slot",e),l.setAttribute("name",e),s===i.length-1&&l.appendChild(t),(n=a.querySelector(`slot[name=${e}]`))==null||n.remove(),a.appendChild(l)}return}o&&hi(o)&&gi(o.host,t,e,i)};function dp(r){function t(e){if(!(!e||e===document||e===window))return yi(e)?e:t(e.getRootNode().host)}return t(r)}function yi(r){return r.id&&r.classList.contains("widget")}function pp(r){var t;return r.id&&((t=r.tagName)==null?void 0:t.startsWith("FLZ-"))&&yi(r)}var L=class{},vi=class extends L{constructor(t){super(),this.action=325,this.payload={section_name:t.name,section_type:t.type}}},_i=class extends L{constructor(t){super(),this.action=327,this.payload={section_name:t.name,section_type:t.type}}},wi=class extends L{constructor(t){super(),this.action=326,this.payload={widget_tag:t.config.widgetTag.toLowerCase(),widget_title:t.widgetTitle}}},xi=class extends L{constructor(t){super(),this.action=328,this.payload={widget_tag:t.config.widgetTag.toLowerCase(),widget_title:t.widgetTitle}}},bi=class extends L{constructor(t){super(),this.action=329,this.payload={section_name:t.name,section_type:t.type}}},Ei=class extends L{constructor(t){super(),this.action=332,this.payload={component_tag:t.getChildEl().tagName.toLowerCase(),widget_tag:t.getChildEl().widget.tagName.toLowerCase()}}},Ai=class extends L{constructor(){super(),this.action=330}},Ci=class extends L{constructor(){super(),this.action=331}},Ti=class extends L{constructor(t){super(),this.action=333,this.payload={rule:{attribute_id:t.mergeTagId,attribute_values:t.mergeTagValues}}}};function yp(r,t){Ce(r,"track-user-event",{trackedUserEvent:t})}var Ke=class{},$i=class extends Ke{constructor(t){super(),this.payload=t,this.action="lead-link-click"}};function wp(r,t,e,i){Ot(r,"track-lead-event",{trackedLeadEvent:t},e,i)}function Ep(r,t,e){Si(r,t,!0,e)}function Ap(r,t,e){Si(r,t,!1,e)}function Si(r,t,e=!1,i){Ot(r,"analytic-event",{type:t,payload:i,isCustom:e})}function Tp(r){let t=_o(window.location.search,"query"),e=new URLSearchParams(t),i=new URL(r);return e.forEach((o,n)=>{i.searchParams.append(n,o)}),i.toString()}function _o(r,t){return r.replace("?","&").replace(new RegExp(`&${t}=[^&]*`),"").replace("&","?")}var Pi=class{constructor(t){this._onMouseClick=t=>{t.target!==this.host&&!t.composedPath().includes(this.host)&&this.host.close()};this.host=t,t.addController(this)}hostConnected(){setTimeout(()=>{this.addListener()})}hostDisconnected(){this.removeListener()}addListener(){window.addEventListener("click",this._onMouseClick,!0)}removeListener(){window.removeEventListener("click",this._onMouseClick,!0)}};var Li=class{constructor(t){this._onKeyUp=t=>{t.key==="Escape"&&this.host.close()};this.host=t,t.addController(this)}hostConnected(){setTimeout(()=>{this.addListener()})}hostDisconnected(){this.removeListener()}addListener(){window.addEventListener("keyup",this._onKeyUp,!0)}removeListener(){window.removeEventListener("keyup",this._onKeyUp,!0)}};var Oi=class extends k{constructor(){super(...arguments);this.isCookieConsentable=!0}};var Je="gatingFormSubmitted",Ri=class extends Ft{constructor(){super(...arguments);this.isGatingForm=!0;this.shouldBeShown=!1}connectedCallback(){super.connectedCallback(),S(this,"get-state",void 0,e=>{var i,o;this.boardId=e.board.id,(o=(i=e.item_viewer)==null?void 0:i.current)!=null&&o.is_gated&&this.toggleOnOrOff()})}incomingEvents(e){var o;super.incomingEvents(e);let i=e.action;if(i==="widgets-scripts-loaded"&&this.shouldBeShown)this.toggleOnOrOff();else if(i==="changeItem"||i==="openItemViewer"){if(!((o=e.payload)!=null&&o.is_gated)){this.close();return}this.toggleOnOrOff()}else i==="itemViewerClosed"&&this.close()}toggleOnOrOff(){S(this,"get-lead",void 0,n=>{this.lead=n});let e=this.isPersistSubmitExists(this.boardId),i=this._data.enableForKnownUsers&&!e,o=this.lead.anon_guest||i;if(console.debug(`show gated form: ${o}`),o){this.show();return}this.close()}show(){var e,i;this.shouldBeShown=!0,((i=(e=this._data)==null?void 0:e.ctaFormConfig)==null?void 0:i.form_id)!==0&&this.classList.contains("hidden")&&S(this,"floating-widget-manager",{widget:this,command:"show"})}close(){this.shouldBeShown=!1,this.classList.contains("hidden")||S(this,"floating-widget-manager",{widget:this,command:"hide"})}persistSubmitToLocalStorage(e){let i=JSON.parse(localStorage.getItem(Je)||"[]");i.includes(e)||(i.push(e),localStorage.setItem(Je,JSON.stringify(i)))}isPersistSubmitExists(e){let i=localStorage.getItem(Je);if(!i)return!1;try{if(JSON.parse(i).includes(e))return!0}catch(o){console.error("could not parse gated board ids from local storage")}return!1}};export{ji as a,St as b,Pt as c,Lt as d,S as e,Ce as f,Ot as g,Jo as h,Zo as i,Xo as j,tn as k,Rt as l,br as m,k as n,Ft as o,Er as p,It as q,kt as r,Ar as s,Tr as t,$r as u,Sr as v,Lr as w,Z as x,Rr as y,Es as z,Gi as A,As as B,Ye as C,P as D,mi as E,lp as F,vo as G,up as H,dp as I,yi as J,pp as K,L,vi as M,_i as N,wi as O,xi as P,bi as Q,Ei as R,Ai as S,Ci as T,Ti as U,yp as V,Ke as W,$i as X,wp as Y,Ep as Z,Ap as _,Tp as $,_o as aa,Pi as ba,Li as ca,Oi as da,Ri as ea};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
