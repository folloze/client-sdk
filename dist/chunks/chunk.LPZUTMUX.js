import{y as i}from"./chunk.3REHG4RI.js";import{a as h}from"./chunk.TWUQ6LLZ.js";import{a,b as m}from"./chunk.KVVA2TM3.js";var l=class{constructor(t){this.fetchService=t}getBoard(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v1/boards/${t}/`).then(e=>{r(e.data)}).catch(e=>{console.error("could not get board"),o(e)})})}getSellerInformation(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v1/boards/${t}/presenter`,{params:{token:this.fetchService.urlToken}}).then(e=>{e.status==206?setTimeout(()=>{this.getSellerInformation(t).then(r).catch(o)},2e3):r(e.data)}).catch(e=>{console.error("could not get seller"),o(e)})})}getCategory(t,r,o){return new Promise((e,s)=>{this.fetchService.fetcher.get(`/live_board/v2/categories/${t}`,{params:{board_id:r,by_slug:o}}).then(n=>{e(n.data)}).catch(n=>{console.error("could not get category",n),s(n)})})}getCategories(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v2/boards/${t}/categories`).then(e=>{e.status==206?setTimeout(()=>{this.getCategories(t).then(r).catch(o)},2e3):r(e.data)}).catch(e=>{console.error("could not get categories",e),o(e)})})}getUserChat(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.post("/live_board/v1/chat/user_chat",{board_id:t,lead_id:r}).then(s=>{o(s.data)}).catch(s=>{console.error("could not get user chat",s),e(s)})})}async createChatUser(t){return this.fetchService.fetcher.post("/live_board/v2/chat/user",t)}async joinChatConversation(t,r){return this.fetchService.fetcher.post(`/live_board/v2/chat/conversation/${t}/participant/${r}`,{})}async leaveChatConversation(t,r){return this.fetchService.fetcher.delete(`/live_board/v2/chat/conversation/${t}/participant/${r}`)}getItem(t,r,o,e){return new Promise((s,n)=>{this.fetchService.fetcher.get(`/live_board/v2/items/${t}`,{params:{by_slug:o,board_id:r,with_preview_metadata:e}}).then(c=>{s(c.data)}).catch(c=>{console.error("could not get item",c),n(c)})})}getItems(t){return new Promise((r,o)=>{this.fetchService.fetcher.post(`/live_board/v2/boards/${t.boardId}/items`,i(t)).then(e=>{e.status==206?setTimeout(()=>{this.getItems(t).then(r).catch(o)},2e3):r(e.data)}).catch(e=>{console.error("could not get items"),o(e)})})}getHasItems(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v2/boards/${t}/items_presence`).then(e=>{e.status==206?setTimeout(()=>{this.getHasItems(t).then(r).catch(o)},2e3):r(e.data)}).catch(e=>{console.error("could not get has items"),o(e)})})}getJourneyItems(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.post(`/live_board/v2/journeys/${t}`,i(r)).then(s=>{o(s.data)}).catch(s=>{console.error("could not get journey items",s),e(s)})})}getContentDownloadUrl(t){return new Promise((r,o)=>{this.fetchService.fetcher.get("/live_board/v2/downloads",{params:{content_item_id:t}}).then(e=>{r(e.data)}).catch(e=>{console.error("could not get download url",e),o(e)})})}createSnapshotUrl(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.post(`/live_board/v1/content_items/${t}/snapshots`,{guid:r}).then(s=>{o(s.data)}).catch(s=>{console.error("could not create snapshot",s),e(s)})})}createItemAnalysis(t){return new Promise((r,o)=>{this.fetchService.fetcher.post(`/live_board/v1/content_items/${t}/analyses`).then(e=>{r(e.data)}).catch(e=>{console.error("could not create analysis",e),o(e)})})}getFileMetadata(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v1/content_items/${t}/files`).then(e=>{e.status==206?setTimeout(()=>{this.getFileMetadata(t).then(r).catch(o)},2e3):r(e.data)}).catch(e=>{console.error("could not get file url",e),o(e)})})}setCookiesConsent(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.post(`/live_board/v1/boards/${t}/cookies_consents`,a({},i(r))).then(s=>{o(s.data)}).catch(s=>{console.error("could not get file url",s),e(s)})})}updateEnrichment(t,r,o){return new Promise((e,s)=>{this.fetchService.fetcher.post("/live_board/v2/enrichments",{type:t,request_time:o,enrichment_data:r}).then(()=>{e()}).catch(n=>{console.error("could not update enrichment",n),s(n)})})}updateCookieMatching(t,r,o){return new Promise((e,s)=>{this.fetchService.fetcher.post("/live_board/v2/cookie_matchings",{type:t,value:r,success:o}).then(()=>{e()}).catch(n=>{console.error("could not update cookie matching",n),s(n)})})}getGeoLocation(){return this.fetchService.withDisableOnPreview(()=>new Promise((t,r)=>{this.fetchService.fetcher.get("/live_board/v1/geo_location").then(o=>{t(o.data)}).catch(o=>{console.error("could not get geolocation",o),r(o)})}))}getCurrentLead(){return new Promise((t,r)=>{this.fetchService.fetcher.get("/live_board/v1/leads/me").then(o=>{t(o.data)}).catch(o=>{console.error("could not get current lead",o),r(o)})})}validateLead(t){return new Promise((r,o)=>{this.fetchService.fetcher.post("/live_board/v2/lead_validations",{board_id:t}).then(()=>{r()}).catch(e=>{console.error("could not validate lead",e),o(e)})})}stopTrackingForSession(){return new Promise((t,r)=>{this.fetchService.fetcher.delete("/live_board/v2/track_leads").then(o=>{t(o.data)}).catch(o=>{console.error("could not get stop tracking lead",o),r(o)})})}getLiveEventUrls(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v2/boards/${t}/live_event`).then(e=>{r(e.data)}).catch(e=>{console.error("could not get current lead",e),o(e)})})}getOrganizationSettings(t){return new Promise((r,o)=>{this.fetchService.fetcher.get(`/live_board/v1/boards/${t}/organization_settings`).then(e=>{r(e.data)}).catch(e=>{console.error("could not get organization settings",e),o(e)})})}setSessionCookie(t){return new Promise((r,o)=>{this.fetchService.fetcher.post(`/live_board/v1/boards/${t}/session_cookies`).then(e=>{r(e.data)}).catch(e=>{console.error("could not create session cookie",e),o(e)})})}getFormData(t,r,o=null){return new Promise((e,s)=>{this.fetchService.fetcher.get(`/live_board/v2/boards/${t}/forms/${r}`,{params:{privacy_message_id:o}}).then(n=>{e(n.data)}).catch(n=>{console.error("could not get form data",n),s(n)})})}getPrivacyMessage(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.get(`/live_board/v2/campaign_elements/${r}`,{params:{element_type:h.privacy_message,board_id:t}}).then(s=>o(s.data)).catch(s=>{console.error("could not get form privacy message",s),e(s)})})}getFooter(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.get(`/live_board/v2/campaign_elements/${r}`,{params:{element_type:h.footer,board_id:t}}).then(s=>o(s.data)).catch(s=>{console.error("could not get form privacy message",s),e(s)})})}getFormPrivacyMessage(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.get(`/live_board/v2/campaign_elements/${r}`,{params:{element_type:h.form_privacy_message,board_id:t}}).then(s=>o(s.data)).catch(s=>{console.error("could not get form privacy message",s),e(s)})})}saveMessageCta(t,r){return this.fetchService.withDisableOnPreview(()=>new Promise((o,e)=>this.notifyIdentity(t,r).then(s=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/campaign/message`,a({},i(r))).then(n=>{o(n.data)}).catch(n=>{console.error("could not submit cta",n),e(n)})})))}saveContactCta(t,r){return this.fetchService.withDisableOnPreview(()=>new Promise((o,e)=>this.notifyIdentity(t,r).then(s=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/campaign/contact`,a({},i(r))).then(n=>{o(n.data)}).catch(n=>{console.error("could not submit cta",n),e(n)})})))}saveFormCta(t,r){return this.fetchService.withDisableOnPreview(()=>new Promise((o,e)=>this.notifyIdentity(t,r).then(s=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/campaign/form`,i(r)).then(n=>o(n.data)).catch(n=>{console.error("could not submit cta",n),e(n)})})))}saveLinkCta(t,r){return this.fetchService.withDisableOnPreview(()=>new Promise((o,e)=>this.notifyIdentity(t,r).then(s=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/campaign/link`,a({},i(r))).then(n=>{o(n.data)}).catch(n=>{console.error("could not submit cta",n),e(n)})})))}trackLinkClick(t,r){return this.fetchService.withDisableOnPreview(()=>new Promise((o,e)=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/campaign/link_click`,a({},i(r))).then(s=>{o(s)}).catch(s=>{console.error("could not submit cta",s),e(s)})}))}saveShareCta(t,r){return this.fetchService.withDisableOnPreview(()=>new Promise((o,e)=>this.notifyIdentity(t,r).then(s=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/campaign/share`,a({},i(r))).then(n=>{o(n.data)}).catch(n=>{console.error("could not submit cta",n),e(n)})})))}saveShareByEmailCta(t,r,o){return this.fetchService.withDisableOnPreview(()=>new Promise((e,s)=>{this.fetchService.fetcher.post(`${this.fetchService.options.analyticsServiceEndpoint}/live_board/v1/boards/${t}/shares`,{email:r,invitation_id:o}).then(()=>{e()}).catch(n=>{console.error("could not submit cta",n),s(n)})}))}getEnrichment(t){let r=(o,e)=>{this.fetchService.fetcher.get(`/live_board/v3/boards/${t}/board_configuration`).then(s=>{o(s)}).catch(s=>{console.error("could not get enrichment",s),e()})};return this.fetchService.withPartialContent(r,500,20)}notifyIdentity(t,r){return this.fetchService.options.analyticsServiceEndpoint?this.fetchService.fetcher.put("/live_board/v2/leads/identity",m(a({},r),{board_id:t})):new Promise(o=>o({status:200}))}joinLiveEvent(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.post(`/live_board/v3/boards/${t}/live_event/${r}/participants`).then(s=>{o(s.data)}).catch(s=>{console.error("could not join live event",s),e(s)})})}leaveLiveEvent(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.delete(`/live_board/v3/boards/${t}/live_event/${r}/participants/me`).then(s=>{o(s.data)}).catch(s=>{console.error("could not leave live event",s),e(s)})})}getLiveEventParticipants(t,r){return new Promise((o,e)=>{this.fetchService.fetcher.get(`/live_board/v3/boards/${t}/live_event/${r}/participants`).then(s=>{o(s.data)}).catch(s=>{console.error("could not get live event participants",s),e(s)})})}};export{l as a};
